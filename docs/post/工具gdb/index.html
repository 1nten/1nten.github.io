<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>[å·¥å…·]GDB | intenã®blogğŸ¦</title>
<meta name="keywords" content="å·¥å…·, äºŒè¿›åˆ¶" />
<meta name="description" content="å°è®° GDB&amp;Pwndbg runï¼šr å¼€å§‹æ‰§è¡Œ continueï¼šc ç»§ç»­æ‰§è¡Œï¼Œåˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹ stack 24 æŸ¥çœ‹æ ˆä¸­24ä¸ªå•ä½çš„æ•°æ® vmmap è™šæ‹Ÿå†…å­˜çš„ç©ºé—´åˆ†å¸ƒ gdb link plt æŸ¥çœ‹pltè¡¨ got æŸ¥çœ‹gotè¡¨ x/20 gxb info b æŸ¥çœ‹æ–­ç‚¹ start åœç•™åœ¨mainå‡½æ•°çš„ç¬¬ä¸€è¡Œï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™åœç•™åœ¨å…¥å£ backtrace æ˜¾ç¤ºå‡½æ•°è°ƒç”¨æ ˆ return è·³å‡ºå½“å‰å‡½æ•° gdb é‡Œé¢ å•æ­¥è°ƒè¯•åˆ†ä¸¤ç§ä¸€ç§æ˜¯Cè¯­è¨€çº§åˆ«çš„å•æ­¥nä¸€ç§æ˜¯æ±‡ç¼–æŒ‡ä»¤çº§åˆ«çš„å•æ­¥niniæŒ‰ä¸€æ¬¡ ä¹‹åç›´æ¥å›è½¦å°±å¥½äº†gdbè‡ªåŠ¨é‡å¤æŒ‡ä»¤çš„ nextï¼šn å•æ­¥æ­¥è¿‡ niï¼š æ±‡ç¼–æŒ‡ä»¤çº§åˆ«çš„å•æ­¥æ­¥è¿‡
stepï¼šs å•æ­¥æ­¥å…¥
siï¼šæ±‡ç¼–æŒ‡ä»¤çº§åˆ«çš„ å•æ­¥æ­¥å…¥
dissa addrï¼š å¯¹å‡½æ•°æˆ–åœ°å€å¤„çš„æŒ‡ä»¤è¿›è¡Œåæ±‡ç¼–
b *addrï¼šä¸‹æ–­ç‚¹
x addrï¼šæŸ¥çœ‹åœ°å€addrå¤„å­˜å‚¨çš„æ•°æ®å€¼
info function/ bï¼šæŸ¥çœ‹å‡½æ•°/ æ–­ç‚¹
x/ nfu &lt;addr&gt;æŸ¥çœ‹å†…å­˜ï¼š nï¼šè¦æ˜¾ç¤ºå†…å­˜å•å…ƒçš„ä¸ªæ•° fï¼šæ˜¾ç¤ºæ–¹å¼ uï¼šä¸€ä¸ªåœ°å€å•å…ƒçš„é•¿åº¦ gdb.attach() è¿åˆ°ç¬¬ä¸€æ¬¡è¾“å…¥ä¹‹å æ–­ç‚¹ä¸‹åˆ° gets ä¹‹åé‚£ä¸€å¥
pwndbg&gt; vmmap
æŸ¥çœ‹åœ°å€æ˜¯å¦å¯è¯»å¯å†™
ä½¿ç”¨æ–¹æ³•:xå…ˆ r ,ç„¶åCtrl Cæš‚åœ,ç¼“å­˜ä¸ä¼šæ¸…ç©º.å†vmmap
ç®€å•çš„åç§»è®¡ç®—ç¤ºä¾‹ æ¨æ–­ä¸ºespå¯»å€">
<meta name="author" content="">
<link rel="canonical" href="https://inten.kro1lsec.com/post/%E5%B7%A5%E5%85%B7gdb/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.fe63ae84f306727c713665eb03a6c71ec6c611434c8182ba17ba7e7d26a979e9.css" integrity="sha256-/mOuhPMGcnxxNmXrA6bHHsbGEUNMgYK6F7p&#43;fSapeek=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js" integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5&#43;kdJvBz5iKbt6B5PJI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://inten.kro1lsec.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://inten.kro1lsec.com/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://inten.kro1lsec.com/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://inten.kro1lsec.com/apple-touch-icon.png">
<link rel="mask-icon" href="https://inten.kro1lsec.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.82.0" />
<meta property="og:title" content="[å·¥å…·]GDB" />
<meta property="og:description" content="å°è®° GDB&amp;Pwndbg runï¼šr å¼€å§‹æ‰§è¡Œ continueï¼šc ç»§ç»­æ‰§è¡Œï¼Œåˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹ stack 24 æŸ¥çœ‹æ ˆä¸­24ä¸ªå•ä½çš„æ•°æ® vmmap è™šæ‹Ÿå†…å­˜çš„ç©ºé—´åˆ†å¸ƒ gdb link plt æŸ¥çœ‹pltè¡¨ got æŸ¥çœ‹gotè¡¨ x/20 gxb info b æŸ¥çœ‹æ–­ç‚¹ start åœç•™åœ¨mainå‡½æ•°çš„ç¬¬ä¸€è¡Œï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™åœç•™åœ¨å…¥å£ backtrace æ˜¾ç¤ºå‡½æ•°è°ƒç”¨æ ˆ return è·³å‡ºå½“å‰å‡½æ•° gdb é‡Œé¢ å•æ­¥è°ƒè¯•åˆ†ä¸¤ç§ä¸€ç§æ˜¯Cè¯­è¨€çº§åˆ«çš„å•æ­¥nä¸€ç§æ˜¯æ±‡ç¼–æŒ‡ä»¤çº§åˆ«çš„å•æ­¥niniæŒ‰ä¸€æ¬¡ ä¹‹åç›´æ¥å›è½¦å°±å¥½äº†gdbè‡ªåŠ¨é‡å¤æŒ‡ä»¤çš„ nextï¼šn å•æ­¥æ­¥è¿‡ niï¼š æ±‡ç¼–æŒ‡ä»¤çº§åˆ«çš„å•æ­¥æ­¥è¿‡
stepï¼šs å•æ­¥æ­¥å…¥
siï¼šæ±‡ç¼–æŒ‡ä»¤çº§åˆ«çš„ å•æ­¥æ­¥å…¥
dissa addrï¼š å¯¹å‡½æ•°æˆ–åœ°å€å¤„çš„æŒ‡ä»¤è¿›è¡Œåæ±‡ç¼–
b *addrï¼šä¸‹æ–­ç‚¹
x addrï¼šæŸ¥çœ‹åœ°å€addrå¤„å­˜å‚¨çš„æ•°æ®å€¼
info function/ bï¼šæŸ¥çœ‹å‡½æ•°/ æ–­ç‚¹
x/ nfu &lt;addr&gt;æŸ¥çœ‹å†…å­˜ï¼š nï¼šè¦æ˜¾ç¤ºå†…å­˜å•å…ƒçš„ä¸ªæ•° fï¼šæ˜¾ç¤ºæ–¹å¼ uï¼šä¸€ä¸ªåœ°å€å•å…ƒçš„é•¿åº¦ gdb.attach() è¿åˆ°ç¬¬ä¸€æ¬¡è¾“å…¥ä¹‹å æ–­ç‚¹ä¸‹åˆ° gets ä¹‹åé‚£ä¸€å¥
pwndbg&gt; vmmap
æŸ¥çœ‹åœ°å€æ˜¯å¦å¯è¯»å¯å†™
ä½¿ç”¨æ–¹æ³•:xå…ˆ r ,ç„¶åCtrl Cæš‚åœ,ç¼“å­˜ä¸ä¼šæ¸…ç©º.å†vmmap
ç®€å•çš„åç§»è®¡ç®—ç¤ºä¾‹ æ¨æ–­ä¸ºespå¯»å€" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://inten.kro1lsec.com/post/%E5%B7%A5%E5%85%B7gdb/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-03-05T00:00:00&#43;00:00" />
<meta property="article:modified_time" content="2021-03-05T00:00:00&#43;00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="[å·¥å…·]GDB"/>
<meta name="twitter:description" content="å°è®° GDB&amp;Pwndbg runï¼šr å¼€å§‹æ‰§è¡Œ continueï¼šc ç»§ç»­æ‰§è¡Œï¼Œåˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹ stack 24 æŸ¥çœ‹æ ˆä¸­24ä¸ªå•ä½çš„æ•°æ® vmmap è™šæ‹Ÿå†…å­˜çš„ç©ºé—´åˆ†å¸ƒ gdb link plt æŸ¥çœ‹pltè¡¨ got æŸ¥çœ‹gotè¡¨ x/20 gxb info b æŸ¥çœ‹æ–­ç‚¹ start åœç•™åœ¨mainå‡½æ•°çš„ç¬¬ä¸€è¡Œï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™åœç•™åœ¨å…¥å£ backtrace æ˜¾ç¤ºå‡½æ•°è°ƒç”¨æ ˆ return è·³å‡ºå½“å‰å‡½æ•° gdb é‡Œé¢ å•æ­¥è°ƒè¯•åˆ†ä¸¤ç§ä¸€ç§æ˜¯Cè¯­è¨€çº§åˆ«çš„å•æ­¥nä¸€ç§æ˜¯æ±‡ç¼–æŒ‡ä»¤çº§åˆ«çš„å•æ­¥niniæŒ‰ä¸€æ¬¡ ä¹‹åç›´æ¥å›è½¦å°±å¥½äº†gdbè‡ªåŠ¨é‡å¤æŒ‡ä»¤çš„ nextï¼šn å•æ­¥æ­¥è¿‡ niï¼š æ±‡ç¼–æŒ‡ä»¤çº§åˆ«çš„å•æ­¥æ­¥è¿‡
stepï¼šs å•æ­¥æ­¥å…¥
siï¼šæ±‡ç¼–æŒ‡ä»¤çº§åˆ«çš„ å•æ­¥æ­¥å…¥
dissa addrï¼š å¯¹å‡½æ•°æˆ–åœ°å€å¤„çš„æŒ‡ä»¤è¿›è¡Œåæ±‡ç¼–
b *addrï¼šä¸‹æ–­ç‚¹
x addrï¼šæŸ¥çœ‹åœ°å€addrå¤„å­˜å‚¨çš„æ•°æ®å€¼
info function/ bï¼šæŸ¥çœ‹å‡½æ•°/ æ–­ç‚¹
x/ nfu &lt;addr&gt;æŸ¥çœ‹å†…å­˜ï¼š nï¼šè¦æ˜¾ç¤ºå†…å­˜å•å…ƒçš„ä¸ªæ•° fï¼šæ˜¾ç¤ºæ–¹å¼ uï¼šä¸€ä¸ªåœ°å€å•å…ƒçš„é•¿åº¦ gdb.attach() è¿åˆ°ç¬¬ä¸€æ¬¡è¾“å…¥ä¹‹å æ–­ç‚¹ä¸‹åˆ° gets ä¹‹åé‚£ä¸€å¥
pwndbg&gt; vmmap
æŸ¥çœ‹åœ°å€æ˜¯å¦å¯è¯»å¯å†™
ä½¿ç”¨æ–¹æ³•:xå…ˆ r ,ç„¶åCtrl Cæš‚åœ,ç¼“å­˜ä¸ä¼šæ¸…ç©º.å†vmmap
ç®€å•çš„åç§»è®¡ç®—ç¤ºä¾‹ æ¨æ–­ä¸ºespå¯»å€"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://inten.kro1lsec.com/post/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "[å·¥å…·]GDB",
      "item": "https://inten.kro1lsec.com/post/%E5%B7%A5%E5%85%B7gdb/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "[å·¥å…·]GDB",
  "name": "[å·¥å…·]GDB",
  "description": "å°è®° GDB\u0026amp;Pwndbg runï¼šr å¼€å§‹æ‰§è¡Œ continueï¼šc ç»§ç»­æ‰§è¡Œï¼Œåˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹ stack 24 æŸ¥çœ‹æ ˆä¸­24ä¸ªå•ä½çš„æ•°æ® vmmap è™šæ‹Ÿå†…å­˜çš„ç©ºé—´åˆ†å¸ƒ gdb link plt æŸ¥çœ‹pltè¡¨ got æŸ¥çœ‹gotè¡¨ x/20 gxb info b æŸ¥çœ‹æ–­ç‚¹ start åœç•™åœ¨mainå‡½æ•°çš„ç¬¬ä¸€è¡Œï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™åœç•™åœ¨å…¥å£ backtrace æ˜¾ç¤ºå‡½æ•°è°ƒç”¨æ ˆ return è·³å‡ºå½“å‰å‡½æ•° gdb é‡Œé¢ å•æ­¥è°ƒè¯•åˆ†ä¸¤ç§ä¸€ç§æ˜¯Cè¯­è¨€çº§åˆ«çš„å•æ­¥nä¸€ç§æ˜¯æ±‡ç¼–æŒ‡ä»¤çº§åˆ«çš„å•æ­¥niniæŒ‰ä¸€æ¬¡ ä¹‹åç›´æ¥å›è½¦å°±å¥½äº†gdbè‡ªåŠ¨é‡å¤æŒ‡ä»¤çš„ nextï¼šn å•æ­¥æ­¥è¿‡ niï¼š æ±‡ç¼–æŒ‡ä»¤çº§åˆ«çš„å•æ­¥æ­¥è¿‡\nstepï¼šs å•æ­¥æ­¥å…¥\nsiï¼šæ±‡ç¼–æŒ‡ä»¤çº§åˆ«çš„ å•æ­¥æ­¥å…¥\ndissa addrï¼š å¯¹å‡½æ•°æˆ–åœ°å€å¤„çš„æŒ‡ä»¤è¿›è¡Œåæ±‡ç¼–\nb *addrï¼šä¸‹æ–­ç‚¹\nx addrï¼šæŸ¥çœ‹åœ°å€addrå¤„å­˜å‚¨çš„æ•°æ®å€¼\ninfo function/ bï¼šæŸ¥çœ‹å‡½æ•°/ æ–­ç‚¹\nx/ nfu \u0026lt;addr\u0026gt;æŸ¥çœ‹å†…å­˜ï¼š nï¼šè¦æ˜¾ç¤ºå†…å­˜å•å…ƒçš„ä¸ªæ•° fï¼šæ˜¾ç¤ºæ–¹å¼ uï¼šä¸€ä¸ªåœ°å€å•å…ƒçš„é•¿åº¦ gdb.attach() è¿åˆ°ç¬¬ä¸€æ¬¡è¾“å…¥ä¹‹å æ–­ç‚¹ä¸‹åˆ° gets ä¹‹åé‚£ä¸€å¥\npwndbg\u0026gt; vmmap\næŸ¥çœ‹åœ°å€æ˜¯å¦å¯è¯»å¯å†™\nä½¿ç”¨æ–¹æ³•:xå…ˆ r ,ç„¶åCtrl Cæš‚åœ,ç¼“å­˜ä¸ä¼šæ¸…ç©º.å†vmmap\nç®€å•çš„åç§»è®¡ç®—ç¤ºä¾‹ æ¨æ–­ä¸ºespå¯»å€",
  "keywords": [
    "å·¥å…·", "äºŒè¿›åˆ¶"
  ],
  "articleBody": "å°è®° GDB\u0026Pwndbg runï¼šr å¼€å§‹æ‰§è¡Œ continueï¼šc ç»§ç»­æ‰§è¡Œï¼Œåˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹ stack 24 æŸ¥çœ‹æ ˆä¸­24ä¸ªå•ä½çš„æ•°æ® vmmap è™šæ‹Ÿå†…å­˜çš„ç©ºé—´åˆ†å¸ƒ gdb link plt æŸ¥çœ‹pltè¡¨ got æŸ¥çœ‹gotè¡¨ x/20 gxb info b æŸ¥çœ‹æ–­ç‚¹ start åœç•™åœ¨mainå‡½æ•°çš„ç¬¬ä¸€è¡Œï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™åœç•™åœ¨å…¥å£ backtrace æ˜¾ç¤ºå‡½æ•°è°ƒç”¨æ ˆ return è·³å‡ºå½“å‰å‡½æ•° gdb é‡Œé¢ å•æ­¥è°ƒè¯•åˆ†ä¸¤ç§ä¸€ç§æ˜¯Cè¯­è¨€çº§åˆ«çš„å•æ­¥nä¸€ç§æ˜¯æ±‡ç¼–æŒ‡ä»¤çº§åˆ«çš„å•æ­¥niniæŒ‰ä¸€æ¬¡ ä¹‹åç›´æ¥å›è½¦å°±å¥½äº†gdbè‡ªåŠ¨é‡å¤æŒ‡ä»¤çš„ nextï¼šn å•æ­¥æ­¥è¿‡ niï¼š æ±‡ç¼–æŒ‡ä»¤çº§åˆ«çš„å•æ­¥æ­¥è¿‡\nstepï¼šs å•æ­¥æ­¥å…¥\nsiï¼šæ±‡ç¼–æŒ‡ä»¤çº§åˆ«çš„ å•æ­¥æ­¥å…¥\ndissa addrï¼š å¯¹å‡½æ•°æˆ–åœ°å€å¤„çš„æŒ‡ä»¤è¿›è¡Œåæ±‡ç¼–\nb *addrï¼šä¸‹æ–­ç‚¹\nx addrï¼šæŸ¥çœ‹åœ°å€addrå¤„å­˜å‚¨çš„æ•°æ®å€¼\ninfo function/ bï¼šæŸ¥çœ‹å‡½æ•°/ æ–­ç‚¹\nx/ nfu æŸ¥çœ‹å†…å­˜ï¼š nï¼šè¦æ˜¾ç¤ºå†…å­˜å•å…ƒçš„ä¸ªæ•° fï¼šæ˜¾ç¤ºæ–¹å¼ uï¼šä¸€ä¸ªåœ°å€å•å…ƒçš„é•¿åº¦ gdb.attach() è¿åˆ°ç¬¬ä¸€æ¬¡è¾“å…¥ä¹‹å æ–­ç‚¹ä¸‹åˆ° gets ä¹‹åé‚£ä¸€å¥\npwndbg vmmap\næŸ¥çœ‹åœ°å€æ˜¯å¦å¯è¯»å¯å†™\nä½¿ç”¨æ–¹æ³•:xå…ˆ r ,ç„¶åCtrl Cæš‚åœ,ç¼“å­˜ä¸ä¼šæ¸…ç©º.å†vmmap\nç®€å•çš„åç§»è®¡ç®—ç¤ºä¾‹ æ¨æ–­ä¸ºespå¯»å€\nfrom pwn import * p = process(\"./ret2.text\") #espå¯»å€ï¼Œç¼–è¯‘å™¨ä¼šä¼˜åŒ–ã€‚éœ€è¦+8ä¸ªå­—èŠ‚ esp_padding = \"junkjunk\" #32ä½ä¸º+4ï¼Œ64ä½+8 ebp_fake = \"junk\" #å®šä¹‰char s åˆ†é…äº†64çš„ç©ºé—´ padding = \"a\"*0x64 #call system å‡½æ•° ä¸Šä¸€è¡Œ mov... ä¼ å…¥å‚æ•°çš„åœ°å€ ret_addr = 0x0804863A payload = padding + ebp_fake + esp_padding + p32(ret_addr) p.sendlineafter(\"There is something amazing here,do you know any thing?\\n\"ï¼Œpayload) p.interactive() ç»„æˆæ¶æ„ åŸºæœ¬å·¥ä½œåŸç† gdb é€šè¿‡ç³»ç»Ÿè°ƒç”¨ ptrace æ¥æ¥ç®¡ä¸€ä¸ªè¿›ç¨‹çš„æ‰§è¡Œã€‚ptrace ç³»ç»Ÿè°ƒç”¨æä¾›äº†ä¸€ç§æ–¹æ³•ä½¿å¾—çˆ¶è¿›ç¨‹å¯ä»¥è§‚å¯Ÿå’Œæ§åˆ¶å…¶å®ƒè¿›ç¨‹çš„æ‰§è¡Œï¼Œæ£€æŸ¥å’Œæ”¹å˜å…¶æ ¸å¿ƒæ˜ åƒä»¥åŠå¯„å­˜å™¨ã€‚å®ƒä¸»è¦ç”¨æ¥å®ç°æ–­ç‚¹è°ƒè¯•å’Œç³»ç»Ÿè°ƒç”¨è·Ÿè¸ªã€‚ptrace ç³»ç»Ÿè°ƒç”¨çš„åŸå‹å¦‚ä¸‹ï¼š\n#include  long ptrace(enum __ptrace_request request, pid_t pid, void *addr, void *data);  pid_t pidï¼šæŒ‡ç¤º ptrace è¦è·Ÿè¸ªçš„è¿›ç¨‹ã€‚ void *addrï¼šæŒ‡ç¤ºè¦ç›‘æ§çš„å†…å­˜åœ°å€ã€‚ void *dataï¼šå­˜æ”¾è¯»å–å‡ºçš„æˆ–è€…è¦å†™å…¥çš„æ•°æ®ã€‚ enum __ptrace_request requestï¼šå†³å®šäº†ç³»ç»Ÿè°ƒç”¨çš„åŠŸèƒ½ï¼Œå‡ ä¸ªä¸»è¦çš„é€‰é¡¹ï¼š  PTRACE_TRACEMEï¼šè¡¨ç¤ºæ­¤è¿›ç¨‹å°†è¢«çˆ¶è¿›ç¨‹è·Ÿè¸ªï¼Œä»»ä½•ä¿¡å·ï¼ˆé™¤äº† SIGKILLï¼‰éƒ½ä¼šæš‚åœå­è¿›ç¨‹ï¼Œæ¥ç€é˜»å¡äº wait() ç­‰å¾…çš„çˆ¶è¿›ç¨‹è¢«å”¤é†’ã€‚å­è¿›ç¨‹å†…éƒ¨å¯¹ exec() çš„è°ƒç”¨å°†å‘å‡º SIGTRAP ä¿¡å·ï¼Œè¿™å¯ä»¥è®©çˆ¶è¿›ç¨‹åœ¨å­è¿›ç¨‹æ–°ç¨‹åºå¼€å§‹è¿è¡Œä¹‹å‰å°±å®Œå…¨æ§åˆ¶å®ƒã€‚ PTRACE_ATTACHï¼šattach åˆ°ä¸€ä¸ªæŒ‡å®šçš„è¿›ç¨‹ï¼Œä½¿å…¶æˆä¸ºå½“å‰è¿›ç¨‹è·Ÿè¸ªçš„å­è¿›ç¨‹ï¼Œè€Œå­è¿›ç¨‹çš„è¡Œä¸ºç­‰åŒäºå®ƒè¿›è¡Œäº†ä¸€æ¬¡ PTRACE_TRACEME æ“ä½œã€‚ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶å½“å‰è¿›ç¨‹æˆä¸ºè¢«è·Ÿè¸ªè¿›ç¨‹çš„çˆ¶è¿›ç¨‹ï¼Œä½†æ˜¯å­è¿›ç¨‹ä½¿ç”¨ getppid() çš„åˆ°çš„ä»å°†æ˜¯å…¶åŸå§‹çˆ¶è¿›ç¨‹çš„ pidã€‚ PTRACE_CONTï¼šç»§ç»­è¿è¡Œä¹‹å‰åœæ­¢çš„å­è¿›ç¨‹ã€‚å¯åŒæ—¶å‘å­è¿›ç¨‹äº¤ä»˜æŒ‡å®šçš„ä¿¡å·ã€‚    ä¸‰ç§è°ƒè¯•æ–¹å¼  è¿è¡Œå¹¶è°ƒè¯•ä¸€ä¸ªæ–°è¿›ç¨‹  è¿è¡Œ gdbï¼Œé€šè¿‡å‘½ä»¤è¡Œæˆ– file å‘½ä»¤æŒ‡å®šç›®æ ‡ç¨‹åºã€‚ è¾“å…¥ run å‘½ä»¤ï¼Œ gdb æ‰§è¡Œä¸‹é¢çš„æ“ä½œï¼š  é€šè¿‡ fork() ç³»ç»Ÿè°ƒç”¨åˆ›å»ºä¸€ä¸ªæ–°è¿›ç¨‹ åœ¨æ–°åˆ›å»ºçš„å­è¿›ç¨‹ä¸­æ‰§è¡Œæ“ä½œï¼šptrace(PTRACE_TRACEME, 0, 0, 0) åœ¨å­è¿›ç¨‹ä¸­é€šè¿‡ execv() ç³»ç»Ÿè°ƒç”¨åŠ è½½ç”¨æˆ·æŒ‡å®šçš„å¯æ‰§è¡Œæ–‡ä»¶     attach å¹¶è°ƒè¯•ä¸€ä¸ªå·²ç»è¿è¡Œçš„è¿›ç¨‹  ç”¨æˆ·ç¡®å®šéœ€è¦è¿›è¡Œè°ƒè¯•çš„è¿›ç¨‹ PID è¿è¡Œ gdbï¼Œè¾“å…¥ attach ï¼Œgdb å°†å¯¹æŒ‡å®šè¿›ç¨‹æ‰§è¡Œæ“ä½œï¼šptrace(PTRACE_ATTACH, pid, 0, 0)   è¿œç¨‹è°ƒè¯•ç›®æ ‡æœºä¸Šæ–°åˆ›å»ºçš„è¿›ç¨‹  gdb è¿è¡Œåœ¨è°ƒè¯•æœºä¸Šï¼Œgdbserver è¿è¡Œåœ¨ç›®æ ‡æœºä¸Šï¼Œä¸¤è€…ä¹‹é—´çš„é€šä¿¡æ•°æ®æ ¼å¼ç”± gdb è¿œç¨‹ä¸²è¡Œåè®®ï¼ˆRemote Serial Protocolï¼‰å®šä¹‰ RSP åè®®æ•°æ®çš„åŸºæœ¬æ ¼å¼ä¸ºï¼š $..........#xx gdbserver çš„å¯åŠ¨æ–¹å¼ç›¸å½“äºè¿è¡Œå¹¶è°ƒè¯•ä¸€ä¸ªæ–°åˆ›å»ºçš„è¿›ç¨‹    æ³¨æ„ï¼Œåœ¨ä½ å°† gdb attach åˆ°ä¸€ä¸ªè¿›ç¨‹æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°è¿™æ ·çš„é—®é¢˜ï¼š\ngdb-peda$ attach 9091 Attaching to process 9091 ptrace: Operation not permitted. è¿™æ˜¯å› ä¸ºå¼€å¯äº†å†…æ ¸å‚æ•° ptrace_scopeï¼š\n$ cat /proc/sys/kernel/yama/ptrace_scope 1 1 è¡¨ç¤º Trueï¼Œæ­¤æ—¶æ™®é€šç”¨æˆ·è¿›ç¨‹æ˜¯ä¸èƒ½å¯¹å…¶ä»–è¿›ç¨‹è¿›è¡Œ attach æ“ä½œçš„ï¼Œå½“ç„¶ä½ å¯ä»¥ç”¨ root æƒé™å¯åŠ¨ gdbï¼Œä½†æœ€å¥½çš„åŠæ³•è¿˜æ˜¯å…³æ‰å®ƒï¼š\n# echo 0  /proc/sys/kernel/yama/ptrace_scope æ–­ç‚¹çš„å®ç° æ–­ç‚¹çš„åŠŸèƒ½æ˜¯é€šè¿‡å†…æ ¸ä¿¡å·å®ç°çš„ï¼Œåœ¨ x86 æ¶æ„ä¸Šï¼Œå†…æ ¸å‘æŸä¸ªåœ°å€æ‰“å…¥æ–­ç‚¹ï¼Œå®é™…ä¸Šå°±æ˜¯å¾€è¯¥åœ°å€å†™å…¥æ–­ç‚¹æŒ‡ä»¤ INT 3ï¼Œå³ 0xCCã€‚ç›®æ ‡ç¨‹åºè¿è¡Œåˆ°è¿™æ¡æŒ‡ä»¤ä¹‹åä¼šè§¦å‘ SIGTRAP ä¿¡å·ï¼Œgdb æ•è·è¿™ä¸ªä¿¡å·ï¼Œå¹¶æ ¹æ®ç›®æ ‡ç¨‹åºå½“å‰åœæ­¢çš„ä½ç½®æŸ¥è¯¢ gdb ç»´æŠ¤çš„æ–­ç‚¹é“¾è¡¨ï¼Œè‹¥å‘ç°åœ¨è¯¥åœ°å€ç¡®å®å­˜åœ¨æ–­ç‚¹ï¼Œåˆ™å¯åˆ¤å®šä¸ºæ–­ç‚¹å‘½ä¸­ã€‚\ngdb åŸºæœ¬æ“ä½œ ä½¿ç”¨ -tui é€‰é¡¹å¯ä»¥å°†ä»£ç æ˜¾ç¤ºåœ¨ä¸€ä¸ªæ¼‚äº®çš„äº¤äº’å¼çª—å£ä¸­ã€‚\nè°ƒè¯•ä¸­å¯ç”¨Ctrl+X+Aåˆ‡æ¢\nbreak â€“ b  break å½“ä¸å¸¦å‚æ•°æ—¶ï¼Œåœ¨æ‰€é€‰æ ˆå¸§ä¸­æ‰§è¡Œçš„ä¸‹ä¸€æ¡æŒ‡ä»¤å¤„è®¾ç½®æ–­ç‚¹ã€‚ break  åœ¨å‡½æ•°ä½“å…¥å£å¤„æ‰“æ–­ç‚¹ã€‚ break  åœ¨å½“å‰æºç æ–‡ä»¶æŒ‡å®šè¡Œçš„å¼€å§‹å¤„æ‰“æ–­ç‚¹ã€‚ break -N break +N åœ¨å½“å‰æºç è¡Œå‰é¢æˆ–åé¢çš„ N è¡Œå¼€å§‹å¤„æ‰“æ–­ç‚¹ï¼ŒN ä¸ºæ­£æ•´æ•°ã€‚ break  åœ¨æºç æ–‡ä»¶ filename çš„ line è¡Œå¤„æ‰“æ–­ç‚¹ã€‚ break  åœ¨æºç æ–‡ä»¶ filename çš„ function å‡½æ•°å…¥å£å¤„æ‰“æ–­ç‚¹ã€‚ break  åœ¨ç¨‹åºæŒ‡ä»¤çš„åœ°å€å¤„æ‰“æ–­ç‚¹ã€‚ break ... if  è®¾ç½®æ¡ä»¶æ–­ç‚¹ï¼Œ... ä»£è¡¨ä¸Šè¿°å‚æ•°ä¹‹ä¸€ï¼ˆæˆ–æ— å‚æ•°ï¼‰ï¼Œcond ä¸ºæ¡ä»¶è¡¨è¾¾å¼ï¼Œä»…åœ¨ cond å€¼éé›¶æ—¶åœä½ç¨‹åºã€‚  info  info breakpoints -- i b æŸ¥çœ‹æ–­ç‚¹ï¼Œè§‚å¯Ÿç‚¹å’Œæ•è·ç‚¹çš„åˆ—è¡¨ã€‚  info breakpoints [listâ€¦] info break [listâ€¦] listâ€¦ ç”¨æ¥æŒ‡å®šè‹¥å¹²ä¸ªæ–­ç‚¹çš„ç¼–å·ï¼ˆå¯çœç•¥ï¼‰ï¼Œå¯ä»¥æ˜¯ 2ï¼Œ 1-3ï¼Œ 2 5 ç­‰ã€‚   info display æ‰“å°è‡ªåŠ¨æ˜¾ç¤ºçš„è¡¨è¾¾å¼åˆ—è¡¨ï¼Œæ¯ä¸ªè¡¨è¾¾å¼éƒ½å¸¦æœ‰é¡¹ç›®ç¼–å·ï¼Œä½†ä¸æ˜¾ç¤ºå…¶å€¼ã€‚ info reg æ˜¾ç¤ºå½“å‰å¯„å­˜å™¨ä¿¡æ¯ã€‚ info threads æ‰“å°å‡ºæ‰€æœ‰çº¿ç¨‹çš„ä¿¡æ¯ï¼ŒåŒ…å« Thread IDã€Target ID å’Œ Frameã€‚ info frame æ‰“å°å‡ºæŒ‡å®šæ ˆå¸§çš„è¯¦ç»†ä¿¡æ¯ã€‚ info proc æŸ¥çœ‹ proc é‡Œçš„è¿›ç¨‹ä¿¡æ¯ã€‚  disable â€“ dis ç¦ç”¨æ–­ç‚¹ï¼Œå‚æ•°ä½¿ç”¨ç©ºæ ¼åˆ†éš”ã€‚ä¸å¸¦å‚æ•°æ—¶ç¦ç”¨æ‰€æœ‰æ–­ç‚¹ã€‚\n disable [breakpoints] [listâ€¦] breakpoints æ˜¯ disable çš„å­å‘½ä»¤ï¼ˆå¯çœç•¥ï¼‰ï¼Œlistâ€¦ åŒ info breakpoints ä¸­çš„æè¿°ã€‚  enable å¯ç”¨æ–­ç‚¹ï¼Œå‚æ•°ä½¿ç”¨ç©ºæ ¼åˆ†éš”ã€‚ä¸å¸¦å‚æ•°æ—¶å¯ç”¨æ‰€æœ‰æ–­ç‚¹ã€‚\n enable [breakpoints] [listâ€¦] å¯ç”¨æŒ‡å®šçš„æ–­ç‚¹ï¼ˆæˆ–æ‰€æœ‰å®šä¹‰çš„æ–­ç‚¹ï¼‰ã€‚ enable [breakpoints] once listâ€¦ ä¸´æ—¶å¯ç”¨æŒ‡å®šçš„æ–­ç‚¹ã€‚GDB åœ¨åœæ­¢æ‚¨çš„ç¨‹åºåç«‹å³ç¦ç”¨è¿™äº›æ–­ç‚¹ã€‚ enable [breakpoints] delete listâ€¦ ä½¿æŒ‡å®šçš„æ–­ç‚¹å¯ç”¨ä¸€æ¬¡ï¼Œç„¶ååˆ é™¤ã€‚ä¸€æ—¦æ‚¨çš„ç¨‹åºåœæ­¢ï¼ŒGDB å°±ä¼šåˆ é™¤è¿™äº›æ–­ç‚¹ã€‚ç­‰æ•ˆäºç”¨ tbreak è®¾ç½®çš„æ–­ç‚¹ã€‚  breakpoints åŒ disable ä¸­çš„æè¿°ã€‚\nclear åœ¨æŒ‡å®šè¡Œæˆ–å‡½æ•°å¤„æ¸…é™¤æ–­ç‚¹ã€‚å‚æ•°å¯ä»¥æ˜¯è¡Œå·ï¼Œå‡½æ•°åç§°æˆ– * è·Ÿä¸€ä¸ªåœ°å€ã€‚\n clear å½“ä¸å¸¦å‚æ•°æ—¶ï¼Œæ¸…é™¤æ‰€é€‰æ ˆå¸§åœ¨æ‰§è¡Œçš„æºç è¡Œä¸­çš„æ‰€æœ‰æ–­ç‚¹ã€‚ clear , clear  åˆ é™¤åœ¨å‘½åå‡½æ•°çš„å…¥å£å¤„è®¾ç½®çš„ä»»ä½•æ–­ç‚¹ã€‚ clear , clear  åˆ é™¤åœ¨æŒ‡å®šçš„æ–‡ä»¶æŒ‡å®šçš„è¡Œå·çš„ä»£ç ä¸­è®¾ç½®çš„ä»»ä½•æ–­ç‚¹ã€‚ clear  æ¸…é™¤æŒ‡å®šç¨‹åºæŒ‡ä»¤çš„åœ°å€å¤„çš„æ–­ç‚¹ã€‚  delete â€“ d åˆ é™¤æ–­ç‚¹ã€‚å‚æ•°ä½¿ç”¨ç©ºæ ¼åˆ†éš”ã€‚ä¸å¸¦å‚æ•°æ—¶åˆ é™¤æ‰€æœ‰æ–­ç‚¹ã€‚\n delete [breakpoints] [listâ€¦]  tbreak è®¾ç½®ä¸´æ—¶æ–­ç‚¹ã€‚å‚æ•°å½¢å¼åŒ break ä¸€æ ·ã€‚å½“ç¬¬ä¸€æ¬¡å‘½ä¸­æ—¶è¢«åˆ é™¤ã€‚\nwatch ä¸ºè¡¨è¾¾å¼è®¾ç½®è§‚å¯Ÿç‚¹ã€‚æ¯å½“ä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼æ”¹å˜æ—¶ï¼Œè§‚å¯Ÿç‚¹å°±ä¼šåœæ­¢æ‰§è¡Œæ‚¨çš„ç¨‹åºã€‚\n watch [-l|-location]  å¦‚æœç»™å‡ºäº† -l æˆ–è€… -locationï¼Œåˆ™å®ƒä¼šå¯¹ expr æ±‚å€¼å¹¶è§‚å¯Ÿå®ƒæ‰€æŒ‡å‘çš„å†…å­˜ã€‚  å¦å¤– rwatch è¡¨ç¤ºåœ¨è®¿é—®æ—¶åœæ­¢ï¼Œawatch è¡¨ç¤ºåœ¨è®¿é—®å’Œæ”¹å˜æ—¶éƒ½åœæ­¢ã€‚\nstep â€“ s å•æ­¥æ‰§è¡Œç¨‹åºï¼Œç›´åˆ°åˆ°è¾¾ä¸åŒçš„æºç è¡Œã€‚\n step [N] å‚æ•° N è¡¨ç¤ºæ‰§è¡Œ N æ¬¡ï¼ˆæˆ–ç”±äºå¦ä¸€ä¸ªåŸå› ç›´åˆ°ç¨‹åºåœæ­¢ï¼‰ã€‚  reverse-step åå‘æ­¥è¿›ç¨‹åºï¼Œç›´åˆ°åˆ°è¾¾å¦ä¸€ä¸ªæºç è¡Œçš„å¼€å¤´ã€‚\n reverse-step [N] å‚æ•° N è¡¨ç¤ºæ‰§è¡Œ N æ¬¡ï¼ˆæˆ–ç”±äºå¦ä¸€ä¸ªåŸå› ç›´åˆ°ç¨‹åºåœæ­¢ï¼‰ã€‚  next â€“ n å•æ­¥æ‰§è¡Œç¨‹åºï¼Œæ‰§è¡Œå®Œå­ç¨‹åºè°ƒç”¨ã€‚\n next [N]  ä¸ step ä¸åŒï¼Œå¦‚æœå½“å‰çš„æºä»£ç è¡Œè°ƒç”¨å­ç¨‹åºï¼Œåˆ™æ­¤å‘½ä»¤ä¸ä¼šè¿›å…¥å­ç¨‹åºï¼Œè€Œæ˜¯ç»§ç»­æ‰§è¡Œï¼Œå°†å…¶è§†ä¸ºå•ä¸ªæºä»£ç è¡Œã€‚\nreverse-next åå‘æ­¥è¿›ç¨‹åºï¼Œæ‰§è¡Œå®Œå­ç¨‹åºè°ƒç”¨ã€‚\n reverse-next [N]  å¦‚æœè¦æ‰§è¡Œçš„æºä»£ç è¡Œè°ƒç”¨å­ç¨‹åºï¼Œåˆ™æ­¤å‘½ä»¤ä¸ä¼šè¿›å…¥å­ç¨‹åºï¼Œè°ƒç”¨è¢«è§†ä¸ºä¸€ä¸ªæŒ‡ä»¤ã€‚\nreturn æ‚¨å¯ä»¥ä½¿ç”¨ return å‘½ä»¤å–æ¶ˆå‡½æ•°è°ƒç”¨çš„æ‰§è¡Œã€‚å¦‚æœä½ ç»™å‡ºä¸€ä¸ªè¡¨è¾¾å¼å‚æ•°ï¼Œå®ƒçš„å€¼è¢«ç”¨ä½œå‡½æ•°çš„è¿”å›å€¼ã€‚\n return  å°† expression çš„å€¼ä½œä¸ºå‡½æ•°çš„è¿”å›å€¼å¹¶ä½¿å‡½æ•°ç›´æ¥è¿”å›ã€‚  finish â€“ fin æ‰§è¡Œç›´åˆ°é€‰å®šçš„æ ˆå¸§è¿”å›ã€‚\n finish  until â€“ u æ‰§è¡Œç¨‹åºç›´åˆ°å¤§äºå½“å‰æ ˆå¸§æˆ–å½“å‰æ ˆå¸§ä¸­çš„æŒ‡å®šä½ç½®ï¼ˆä¸ break å‘½ä»¤ç›¸åŒçš„å‚æ•°ï¼‰çš„æºç è¡Œã€‚æ­¤å‘½ä»¤å¸¸ç”¨äºé€šè¿‡ä¸€ä¸ªå¾ªç¯ï¼Œä»¥é¿å…å•æ­¥æ‰§è¡Œã€‚\n until  ç»§ç»­è¿è¡Œç¨‹åºï¼Œç›´åˆ°è¾¾åˆ°æŒ‡å®šçš„ä½ç½®ï¼Œæˆ–è€…å½“å‰æ ˆå¸§è¿”å›ã€‚  continue â€“ c åœ¨ä¿¡å·æˆ–æ–­ç‚¹ä¹‹åï¼Œç»§ç»­è¿è¡Œè¢«è°ƒè¯•çš„ç¨‹åºã€‚\n continue [N]  å¦‚æœä»æ–­ç‚¹å¼€å§‹ï¼Œå¯ä»¥ä½¿ç”¨æ•°å­— N ä½œä¸ºå‚æ•°ï¼Œè¿™æ„å‘³ç€å°†è¯¥æ–­ç‚¹çš„å¿½ç•¥è®¡æ•°è®¾ç½®ä¸º N - 1(ä»¥ä¾¿æ–­ç‚¹åœ¨ç¬¬ N æ¬¡åˆ°è¾¾ä¹‹å‰ä¸ä¼šä¸­æ–­)ã€‚\nprint â€“ p æ±‚è¡¨è¾¾å¼ expr çš„å€¼å¹¶æ‰“å°ã€‚å¯è®¿é—®çš„å˜é‡æ˜¯æ‰€é€‰æ ˆå¸§çš„è¯æ³•ç¯å¢ƒï¼Œä»¥åŠèŒƒå›´ä¸ºå…¨å±€æˆ–æ•´ä¸ªæ–‡ä»¶çš„æ‰€æœ‰å˜é‡ã€‚\n print [expr] print /f [expr] é€šè¿‡æŒ‡å®š /f æ¥é€‰æ‹©ä¸åŒçš„æ‰“å°æ ¼å¼ï¼Œå…¶ä¸­ f æ˜¯ä¸€ä¸ªæŒ‡å®šæ ¼å¼çš„å­—æ¯  x æ£€æŸ¥å†…å­˜ã€‚\n x/nfu  x   n, f, å’Œ u éƒ½æ˜¯å¯é€‰å‚æ•°ï¼Œç”¨äºæŒ‡å®šè¦æ˜¾ç¤ºçš„å†…å­˜ä»¥åŠå¦‚ä½•æ ¼å¼åŒ–ã€‚ addr æ˜¯è¦å¼€å§‹æ˜¾ç¤ºå†…å­˜çš„åœ°å€çš„è¡¨è¾¾å¼ã€‚ n é‡å¤æ¬¡æ•°ï¼ˆé»˜è®¤å€¼æ˜¯ 1ï¼‰ï¼ŒæŒ‡å®šè¦æ˜¾ç¤ºå¤šå°‘ä¸ªå•ä½ï¼ˆç”± u æŒ‡å®šï¼‰çš„å†…å­˜å€¼ã€‚ f æ˜¾ç¤ºæ ¼å¼ï¼ˆåˆå§‹é»˜è®¤å€¼æ˜¯ xï¼‰ï¼Œæ˜¾ç¤ºæ ¼å¼æ˜¯ print('x'ï¼Œ'd'ï¼Œ'u'ï¼Œ'o'ï¼Œ't'ï¼Œ'a'ï¼Œ'c'ï¼Œ'f'ï¼Œ's') ä½¿ç”¨çš„æ ¼å¼ä¹‹ä¸€ï¼Œå†åŠ  iï¼ˆæœºå™¨æŒ‡ä»¤ï¼‰ã€‚ u å•ä½å¤§å°ï¼Œb è¡¨ç¤ºå•å­—èŠ‚ï¼Œh è¡¨ç¤ºåŒå­—èŠ‚ï¼Œw è¡¨ç¤ºå››å­—èŠ‚ï¼Œg è¡¨ç¤ºå…«å­—èŠ‚ã€‚    display æ¯æ¬¡ç¨‹åºåœæ­¢æ—¶æ‰“å°è¡¨è¾¾å¼ expr çš„å€¼ã€‚\n display  display/fmt  display/fmt   fmt ç”¨äºæŒ‡å®šæ˜¾ç¤ºæ ¼å¼ã€‚å¯¹äºæ ¼å¼ i æˆ– sï¼Œæˆ–è€…åŒ…æ‹¬å•ä½å¤§å°æˆ–å•ä½æ•°é‡ï¼Œå°†è¡¨è¾¾å¼ addr æ·»åŠ ä¸ºæ¯æ¬¡ç¨‹åºåœæ­¢æ—¶è¦æ£€æŸ¥çš„å†…å­˜åœ°å€ã€‚\ndisassemble â€“ disas åæ±‡ç¼–å‘½ä»¤ã€‚\n disas  åæ±‡ç¼–æŒ‡å®šå‡½æ•° disas  åæ±‡ç¼–æŸåœ°å€æ‰€åœ¨å‡½æ•° disas   åæ±‡ç¼–ä»å¼€å§‹åœ°å€åˆ°ç»“æŸåœ°å€çš„éƒ¨åˆ†  undisplay å–æ¶ˆæŸäº›è¡¨è¾¾å¼åœ¨ç¨‹åºåœæ­¢æ—¶è‡ªåŠ¨æ˜¾ç¤ºã€‚å‚æ•°æ˜¯è¡¨è¾¾å¼çš„ç¼–å·ï¼ˆä½¿ç”¨ info display æŸ¥è¯¢ç¼–å·ï¼‰ã€‚ä¸å¸¦å‚æ•°è¡¨ç¤ºå–æ¶ˆæ‰€æœ‰è‡ªåŠ¨æ˜¾ç¤ºè¡¨è¾¾å¼ã€‚\ndisable display ç¦ç”¨æŸäº›è¡¨è¾¾å¼åœ¨ç¨‹åºåœæ­¢æ—¶è‡ªåŠ¨æ˜¾ç¤ºã€‚ç¦ç”¨çš„æ˜¾ç¤ºé¡¹ç›®è¢«å†æ¬¡å¯ç”¨ã€‚å‚æ•°æ˜¯è¡¨è¾¾å¼çš„ç¼–å·ï¼ˆä½¿ç”¨ info display æŸ¥è¯¢ç¼–å·ï¼‰ã€‚ä¸å¸¦å‚æ•°è¡¨ç¤ºç¦ç”¨æ‰€æœ‰è‡ªåŠ¨æ˜¾ç¤ºè¡¨è¾¾å¼ã€‚\nenable display å¯ç”¨æŸäº›è¡¨è¾¾å¼åœ¨ç¨‹åºåœæ­¢æ—¶è‡ªåŠ¨æ˜¾ç¤ºã€‚å‚æ•°æ˜¯é‡æ–°æ˜¾ç¤ºçš„è¡¨è¾¾å¼çš„ç¼–å·ï¼ˆä½¿ç”¨ info display æŸ¥è¯¢ç¼–å·ï¼‰ã€‚ä¸å¸¦å‚æ•°è¡¨ç¤ºå¯ç”¨æ‰€æœ‰è‡ªåŠ¨æ˜¾ç¤ºè¡¨è¾¾å¼ã€‚\nhelp â€“ h æ‰“å°å‘½ä»¤åˆ—è¡¨ã€‚\n help  æ‚¨å¯ä»¥è·å–è¯¥ç±»ä¸­å„ä¸ªå‘½ä»¤çš„åˆ—è¡¨ã€‚ help  æ˜¾ç¤ºå¦‚ä½•ä½¿ç”¨è¯¥å‘½ä»¤çš„ç®€è¿°ã€‚  attach æŒ‚æ¥åˆ° GDB ä¹‹å¤–çš„è¿›ç¨‹æˆ–æ–‡ä»¶ã€‚å°†è¿›ç¨‹ ID æˆ–è®¾å¤‡æ–‡ä»¶ä½œä¸ºå‚æ•°ã€‚\n attach   run â€“ r å¯åŠ¨è¢«è°ƒè¯•çš„ç¨‹åºã€‚å¯ä»¥ç›´æ¥æŒ‡å®šå‚æ•°ï¼Œä¹Ÿå¯ä»¥ç”¨ set args è®¾ç½®ï¼ˆå¯åŠ¨æ‰€éœ€çš„ï¼‰å‚æ•°ã€‚è¿˜å…è®¸ä½¿ç”¨ , , æˆ–  è¿›è¡Œè¾“å…¥å’Œè¾“å‡ºé‡å®šå‘ã€‚\nç”šè‡³å¯ä»¥è¿è¡Œä¸€ä¸ªè„šæœ¬ï¼Œå¦‚ï¼š\nrun `python2 -c 'print \"A\"*100'` backtrace â€“ bt æ‰“å°æ•´ä¸ªæ ˆçš„å›æº¯ã€‚\n bt æ‰“å°æ•´ä¸ªæ ˆçš„å›æº¯ï¼Œæ¯ä¸ªæ ˆå¸§ä¸€è¡Œã€‚ bt n ç±»ä¼¼äºä¸Šï¼Œä½†åªæ‰“å°æœ€å†…å±‚çš„ n ä¸ªæ ˆå¸§ã€‚ bt -n ç±»ä¼¼äºä¸Šï¼Œä½†åªæ‰“å°æœ€å¤–å±‚çš„ n ä¸ªæ ˆå¸§ã€‚ bt full n ç±»ä¼¼äº bt nï¼Œè¿˜æ‰“å°å±€éƒ¨å˜é‡çš„å€¼ã€‚   æ³¨æ„ï¼šä½¿ç”¨ gdb è°ƒè¯•æ—¶ï¼Œä¼šè‡ªåŠ¨å…³é—­ ASLRï¼Œæ‰€ä»¥å¯èƒ½æ¯æ¬¡çœ‹åˆ°çš„æ ˆåœ°å€éƒ½ä¸å˜ã€‚\n ptype æ‰“å°ç±»å‹ TYPE çš„å®šä¹‰ã€‚\n ptype[/FLAGS] TYPE-NAME | EXPRESSION  å‚æ•°å¯ä»¥æ˜¯ç”± typedef å®šä¹‰çš„ç±»å‹åï¼Œ æˆ–è€… struct STRUCT-TAG æˆ–è€… class CLASS-NAME æˆ–è€… union UNION-TAG æˆ–è€… enum ENUM-TAGã€‚\nset follow-fork-mode å½“ç¨‹åº fork å‡ºä¸€ä¸ªå­è¿›ç¨‹çš„æ—¶å€™ï¼Œgdb é»˜è®¤ä¼šè¿½è¸ªçˆ¶è¿›ç¨‹ï¼ˆset follow-fork-mode parentï¼‰ï¼Œä½†ä¹Ÿå¯ä»¥ä½¿ç”¨å‘½ä»¤ set follow-fork-mode child è®©å…¶è¿½è¸ªå­è¿›ç¨‹ã€‚\nå¦å¤–ï¼Œå¦‚æœæƒ³è¦åŒæ—¶è¿½è¸ªçˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹ï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤ set detach-on-fork offï¼ˆé»˜è®¤ä¸ºonï¼‰ï¼Œè¿™æ ·å°±å¯ä»¥åŒæ—¶è°ƒè¯•çˆ¶å­è¿›ç¨‹ï¼Œåœ¨è°ƒè¯•å…¶ä¸­ä¸€ä¸ªè¿›ç¨‹æ—¶ï¼Œå¦ä¸€ä¸ªè¿›ç¨‹è¢«æŒ‚èµ·ã€‚å¦‚æœæƒ³è®©çˆ¶å­è¿›ç¨‹åŒæ—¶è¿è¡Œï¼Œå¯ä»¥ä½¿ç”¨ set schedule-multiple onï¼ˆé»˜è®¤ä¸ºoffï¼‰ã€‚\nä½†å¦‚æœç¨‹åºæ˜¯ä½¿ç”¨ exec æ¥å¯åŠ¨äº†ä¸€ä¸ªæ–°çš„ç¨‹åºï¼Œå¯ä»¥ä½¿ç”¨ set follow-exec-mode newï¼ˆé»˜è®¤ä¸ºsameï¼‰ æ¥æ–°å»ºä¸€ä¸ª inferior ç»™æ–°ç¨‹åºï¼Œè€Œçˆ¶è¿›ç¨‹çš„ inferior ä»ç„¶ä¿ç•™ã€‚\nthread apply all bt æ‰“å°å‡ºæ‰€æœ‰çº¿ç¨‹çš„å †æ ˆä¿¡æ¯ã€‚\ngenerate-core-file å°†è°ƒè¯•ä¸­çš„è¿›ç¨‹ç”Ÿæˆå†…æ ¸è½¬å‚¨æ–‡ä»¶ã€‚\ndirectory â€“ dir è®¾ç½®æŸ¥æ‰¾æºæ–‡ä»¶çš„è·¯å¾„ã€‚\næˆ–è€…ä½¿ç”¨ gdb çš„ -d å‚æ•°ï¼Œä¾‹å¦‚ï¼šgdb a.out -d /search/code/\ngdb-peda å½“ gdb å¯åŠ¨æ—¶ï¼Œå®ƒä¼šåœ¨å½“å‰ç”¨æˆ·çš„ä¸»ç›®å½•ä¸­å¯»æ‰¾ä¸€ä¸ªåä¸º .gdbinit çš„æ–‡ä»¶ï¼›å¦‚æœè¯¥æ–‡ä»¶å­˜åœ¨ï¼Œåˆ™ gdb å°±æ‰§è¡Œè¯¥æ–‡ä»¶ä¸­çš„æ‰€æœ‰å‘½ä»¤ã€‚é€šå¸¸ï¼Œè¯¥æ–‡ä»¶ç”¨äºç®€å•çš„é…ç½®å‘½ä»¤ã€‚ä½†æ˜¯ .gdbinit çš„é…ç½®ååˆ†ç¹çï¼Œå› æ­¤å¯¹ gdb çš„æ‰©å±•é€šå¸¸ç”¨æ’ä»¶çš„æ–¹å¼æ¥å®ç°ï¼Œé€šè¿‡ python çš„è„šæœ¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„å®ç°éœ€è¦çš„åŠŸèƒ½ã€‚\nPEDAï¼ˆPython Exploit Development Assistance for GDBï¼‰æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ gdb æ’ä»¶ã€‚å®ƒæä¾›äº†é«˜äº®æ˜¾ç¤ºåæ±‡ç¼–ä»£ç ã€å¯„å­˜å™¨ã€å†…å­˜ä¿¡æ¯ç­‰äººæ€§åŒ–çš„åŠŸèƒ½ã€‚åŒæ—¶ï¼ŒPEDA è¿˜æœ‰ä¸€äº›å®ç”¨çš„æ–°å‘½ä»¤ï¼Œæ¯”å¦‚ checksec å¯ä»¥æŸ¥çœ‹ç¨‹åºå¼€å¯äº†å“ªäº›å®‰å…¨æœºåˆ¶ç­‰ç­‰ã€‚\nå®‰è£… å®‰è£… peda éœ€è¦çš„è½¯ä»¶åŒ…ï¼š\n$ sudo apt-get install nasm micro-inetd $ sudo apt-get install libc6-dbg vim ssh å®‰è£… pedaï¼š\n$ git clone https://github.com/longld/peda.git ~/peda $ echo \"source ~/peda/peda.py\"  ~/.gdbinit $ echo \"DONE! debug your program with gdb and enjoy\" å¦‚æœç³»ç»Ÿä¸º Arch Linuxï¼Œåˆ™å¯ä»¥ç›´æ¥å®‰è£…ï¼š\n$ yaourt -S peda pedaå‘½ä»¤   aslr â€“ æ˜¾ç¤º/è®¾ç½® gdb çš„ ASLR\n  asmsearch â€“ Search for ASM instructions in memory\n asmsearch \"int 0x80\" asmsearch \"add esp, ?\" libc    assemble â€“ On the fly assemble and execute instructions using NASM\n  assemble\nassemble $pc  mov al, 0xb  int 0x80  end     checksec â€“ æ£€æŸ¥äºŒè¿›åˆ¶æ–‡ä»¶çš„å®‰å…¨é€‰é¡¹\n  cmpmem â€“ Compare content of a memory region with a file\n cmpmem 0x08049000 0x0804a000 data.mem    context â€“ Display various information of current execution context\n context_code â€“ Display nearby disassembly at $PC of current execution context context_register â€“ Display register information of current execution context context_stack â€“ Display stack of current execution context  context reg context code context stack      crashdump â€“ Display crashdump info and save to file\n  deactive â€“ Bypass a function by ignoring its execution (eg sleep/alarm)\n deactive setresuid deactive chdir    distance â€“ Calculate distance between two addresses\n  dumpargs â€“ åœ¨è°ƒç”¨æŒ‡ä»¤åœæ­¢æ—¶æ˜¾ç¤ºä¼ é€’ç»™å‡½æ•°çš„å‚æ•°\n  dumpmem â€“ Dump content of a memory region to raw binary file\n dumpmem libc.mem libc    dumprop â€“ åœ¨ç‰¹å®šçš„å†…å­˜èŒƒå›´æ˜¾ç¤º ROP gadgets\n dumprop dumprop binary \"pop\"    eflags â€“ Display/set/clear/toggle value of eflags register\n  elfheader â€“ è·å–æ­£åœ¨è°ƒè¯•çš„ ELF æ–‡ä»¶çš„å¤´ä¿¡æ¯\n elfheader elfheader .got    elfsymbol â€“ ä» ELF æ–‡ä»¶ä¸­è·å–æ²¡æœ‰è°ƒè¯•ä¿¡æ¯çš„ç¬¦å·ä¿¡æ¯\n elfsymbol elfsymbol printf    gennop â€“ Generate abitrary length NOP sled using given characters\n gennop 500 gennop 500 \"\\x90\"    getfile â€“ Get exec filename of current debugged process\n  getpid â€“ Get PID of current debugged process\n  goto â€“ Continue execution at an address\n  help â€“ Print the usage manual for PEDA commands\n  hexdump â€“ Display hex/ascii dump of data in memory\n hexdump $sp 64 hexdump $sp /20    hexprint â€“ Display hexified of data in memory\n hexprint $sp 64 hexprint $sp /20    jmpcall â€“ Search for JMP/CALL instructions in memory\n jmpcall jmpcall eax jmpcall esp libc    loadmem â€“ Load contents of a raw binary file to memory\n loadmem stack.mem 0xbffdf000    lookup â€“ æœç´¢å±äºå†…å­˜èŒƒå›´çš„åœ°å€çš„æ‰€æœ‰åœ°å€/å¼•ç”¨\n lookup address stack libc lookup pointer stack ld-2    nearpc â€“ Disassemble instructions nearby current PC or given address\n nearpc 20 nearpc 0x08048484    nextcall â€“ Step until next â€˜callâ€™ instruction in specific memory range\n nextcall cpy    nextjmp â€“ Step until next â€˜j*â€™ instruction in specific memory range\n nextjmp    nxtest â€“ Perform real NX test to see if it is enabled/supported by OS\n  patch â€“ ä½¿ç”¨å­—ç¬¦ä¸²/åå…­è¿›åˆ¶å­—ç¬¦ä¸²/æ•´å½¢æ•°\n patch $esp 0xdeadbeef patch $eax \"the long string\" patch (multiple lines)    pattern â€“ ç”Ÿæˆï¼Œæœç´¢æˆ–å†™å…¥å¾ªç¯ pattern åˆ°å†…å­˜\n pattern_arg â€“ Set argument list with cyclic pattern pattern_create â€“ Generate a cyclic pattern pattern_env â€“ Set environment variable with a cyclic pattern pattern_offset â€“ Search for offset of a value in cyclic pattern pattern_patch â€“ Write a cyclic pattern to memory pattern_search â€“ Search a cyclic pattern in registers and memory  pattern create 2000 pattern create 2000 input pattern offset $pc pattern search pattern patch 0xdeadbeef 100      payload â€“ Generate various type of ROP payload using ret2plt\n payload copybytes payload copybytes target \"/bin/sh\" payload copybytes 0x0804a010 offset    pdisass â€“ Format output of gdb disassemble command with colors\n pdisass $pc /20    pltbreak â€“ Set breakpoint at PLT functions match name regex\n pltbreak cpy    procinfo â€“ æ˜¾ç¤ºè°ƒè¯•è¿›ç¨‹çš„ /proc/pid/\n procinfo procinfo fd    profile â€“ Simple profiling to count executed instructions in the program\n  pyhelp â€“ Wrapper for python built-in help\n pyhelp peda pyhelp hex2str    pshow â€“ æ˜¾ç¤ºå„ç§ PEDA é€‰é¡¹å’Œå…¶ä»–è®¾ç½®\n pshow pshow option context    pset â€“ è®¾ç½®å„ç§ PEDA é€‰é¡¹å’Œå…¶ä»–è®¾ç½®\n pset arg '\"A\"*200' pset arg 'cyclic_pattern(200)' pset env EGG 'cyclic_pattern(200)' pset option context \"code,stack\" pset option badchars \"\\r\\n\"    readelf â€“ è·å– ELF çš„æ–‡ä»¶å¤´ä¿¡æ¯\n readelf libc .text    refsearch â€“ Search for all references to a value in memory ranges\n refsearch \"/bin/sh\" refsearch 0xdeadbeef    reload â€“ Reload PEDA sources, keep current options untouch\n  ropgadget â€“ è·å–äºŒè¿›åˆ¶æˆ–åº“çš„å¸¸è§ ROP gadgets\n ropgadget ropgadget libc    ropsearch â€“ æœç´¢å†…å­˜ä¸­çš„ ROP gadgets\n ropsearch \"pop eax\" ropsearch \"xchg eax, esp\" libc    searchmem|find â€“ æœç´¢å†…å­˜ä¸­çš„ pattern; æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼æœç´¢\n find \"/bin/sh\" libc find 0xdeadbeef all find \"..\\x04\\x08\" 0x08048000 0x08049000    searchmem â€“ Search for a pattern in memory; support regex search\n  session â€“ Save/restore a working gdb session to file as a script\n  set â€“ Set various PEDA options and other settings\n set exec-wrapper ./exploit.py    sgrep â€“ Search for full strings contain the given pattern\n  shellcode â€“ ç”Ÿæˆæˆ–ä¸‹è½½å¸¸è§çš„ shellcode\n shellcode x86/linux exec    show â€“ Show various PEDA options and other settings\n  skeleton â€“ ç”Ÿæˆ python exploit ä»£ç æ¨¡æ¿\n skeleton argv exploit.py    skipi â€“ Skip execution of next count instructions\n  snapshot â€“ Save/restore processâ€™s snapshot to/from file\n snapshot save snapshot restore    start â€“ Start debugged program and stop at most convenient entry\n  stepuntil â€“ Step until a desired instruction in specific memory range\n stepuntil cmp stepuntil xor    strings â€“ Display printable strings in memory\n strings strings binary 4    substr â€“ Search for substrings of a given string/number in memory\n  telescope â€“ Display memory content at an address with smart dereferences\n telescope 40 telescope 0xb7d88000 40    tracecall â€“ Trace function calls made by the program\n tracecall tracecall \"cpy,printf\" tracecall \"-puts,fflush\"    traceinst â€“ Trace specific instructions executed by the program\n traceinst 20 traceinst \"cmp,xor\"    unptrace â€“ Disable anti-ptrace detection\n unptrace    utils â€“ Miscelaneous utilities from utils module\n  vmmap â€“ åœ¨è°ƒè¯•è¿‡ç¨‹ä¸­è·å–æ®µçš„è™šæ‹Ÿæ˜ å°„åœ°å€èŒƒå›´\n cmmap vmmap binary / libc vmmap 0xb7d88000    waitfor â€“ Try to attach to new forked process; mimic â€œattach -waitforâ€\n waitfor waitfor myprog -c    xinfo â€“ Display detail information of address/registers\n xinfo register eax xinfo 0xb7d88000    xormem â€“ ç”¨ä¸€ä¸ª key æ¥å¯¹ä¸€ä¸ªå†…å­˜åŒºåŸŸæ‰§è¡Œ XOR æ“ä½œ\n xormem 0x08049000 0x0804a000 â€œthekeyâ€    xprint â€“ Extra support to GDBâ€™s print command\n  xrefs â€“ Search for all call/data access references to a function/variable\n  xuntil â€“ Continue execution until an address or function\n  ä½¿ç”¨ PEDA å’Œ Python ç¼–å†™ gdb è„šæœ¬   å…¨å±€ç±»\n pedacmdï¼š  äº¤äº’å¼å‘½ä»¤ æ²¡æœ‰è¿”å›å€¼ ä¾‹å¦‚ï¼špedacmd.context_register()   pedaï¼š  ä¸ gdb äº¤äº’çš„åç«¯åŠŸèƒ½ æœ‰è¿”å›å€¼ ä¾‹å¦‚ï¼špeda.getreg(\"eax\")      å°å·¥å…·\n ä¾‹å¦‚ï¼što_int()ã€format_address() è·å¾—å¸®åŠ©  pyhelp peda pyhelp hex2str      å•è¡Œï¼äº¤äº’å¼ä½¿ç”¨\n  gdb-peda$ python print peda.get_vmmap()\n  gdb-peda$ python  status = peda.get_status()  while status == \"BREAKPOINT\":  peda.execute(\"continue\")  end     å¤–éƒ¨è„šæœ¬\n# myscript.py def myrun(size): argv = cyclic_pattern(size) peda.execute(\"set arg %s\" % argv) peda.execute(\"run\") gdb-peda$ source myscript.py gdb-peda$ python myrun(100)   pwndbg\u0026\u0026peda pwndbgåœ¨è°ƒè¯•å †çš„æ•°æ®ç»“æ„æ—¶å€™å¾ˆæ–¹ä¾¿\npedaåœ¨æŸ¥æ‰¾å­—ç¬¦ä¸²ç­‰åŠŸèƒ½æ—¶æ–¹ä¾¿\npwndbgå’Œpedaä¸èƒ½åŒæ—¶ä½¿ç”¨\nåˆ‡æ¢æ–¹æ³•\né»˜è®¤åœ¨homeä¸­æ‰“å¼€ç»ˆç«¯: sudo nano ./.gdbinit\næƒ³å¯ç”¨æŸä¸€ä¸ªæ—¶ï¼Œæ³¨é‡Šæ‰å¦ä¸€ä¸ªå°±è¡Œã€‚\nå‚è€ƒèµ„æ–™ Debugging with GDB\n100ä¸ªgdbå°æŠ€å·§\npwndbg+pwndbgè”åˆä½¿ç”¨\nPwngdb\nGEF\npwndbg\npeda\n",
  "wordCount" : "1781",
  "inLanguage": "en",
  "datePublished": "2021-03-05T00:00:00Z",
  "dateModified": "2021-03-05T00:00:00Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://inten.kro1lsec.com/post/%E5%B7%A5%E5%85%B7gdb/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "intenã®blogğŸ¦",
    "logo": {
      "@type": "ImageObject",
      "url": "https://inten.kro1lsec.com/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<noscript>
    <style type="text/css">
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: #1d1e20;
                --entry: #2e2e33;
                --primary: rgba(255, 255, 255, 0.84);
                --secondary: rgba(255, 255, 255, 0.56);
                --tertiary: rgba(255, 255, 255, 0.16);
                --content: rgba(255, 255, 255, 0.74);
                --hljs-bg: #2e2e33;
                --code-bg: #37383e;
                --border: #333;
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://inten.kro1lsec.com/" accesskey="h" title="intenã®blogğŸ¦ (Alt + H)">intenã®blogğŸ¦</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://inten.kro1lsec.com/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://inten.kro1lsec.com/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://inten.kro1lsec.com/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      [å·¥å…·]GDB
    </h1>
    <div class="post-meta">March 5, 2021&nbsp;Â·&nbsp;9 min
</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <div class="details">Table of Contents</div>
        </summary>
        <div class="inner"><ul><ul>
                <li>
                    <a href="#%e5%b0%8f%e8%ae%b0" aria-label="å°è®°">å°è®°</a><ul>
                        
                <li>
                    <a href="#gdbpwndbg" aria-label="GDB&amp;amp;Pwndbg">GDB&amp;Pwndbg</a><ul>
                        
                <li>
                    <a href="#%e7%ae%80%e5%8d%95%e7%9a%84%e5%81%8f%e7%a7%bb%e8%ae%a1%e7%ae%97%e7%a4%ba%e4%be%8b" aria-label="ç®€å•çš„åç§»è®¡ç®—ç¤ºä¾‹">ç®€å•çš„åç§»è®¡ç®—ç¤ºä¾‹</a></li></ul>
                </li>
                <li>
                    <a href="#%e7%bb%84%e6%88%90%e6%9e%b6%e6%9e%84" aria-label="ç»„æˆæ¶æ„">ç»„æˆæ¶æ„</a></li>
                <li>
                    <a href="#%e5%9f%ba%e6%9c%ac%e5%b7%a5%e4%bd%9c%e5%8e%9f%e7%90%86" aria-label="åŸºæœ¬å·¥ä½œåŸç†"><strong>åŸºæœ¬å·¥ä½œåŸç†</strong></a></li>
                <li>
                    <a href="#%e4%b8%89%e7%a7%8d%e8%b0%83%e8%af%95%e6%96%b9%e5%bc%8f" aria-label="ä¸‰ç§è°ƒè¯•æ–¹å¼">ä¸‰ç§è°ƒè¯•æ–¹å¼</a></li>
                <li>
                    <a href="#%e6%96%ad%e7%82%b9%e7%9a%84%e5%ae%9e%e7%8e%b0" aria-label="æ–­ç‚¹çš„å®ç°"><strong>æ–­ç‚¹çš„å®ç°</strong></a></li></ul>
                </li></ul>
                    
                <li>
                    <a href="#gdb-%e5%9f%ba%e6%9c%ac%e6%93%8d%e4%bd%9c" aria-label="gdb åŸºæœ¬æ“ä½œ"><strong>gdb åŸºæœ¬æ“ä½œ</strong></a><ul>
                        
                <li>
                    <a href="#break----b" aria-label="break &amp;ndash; b"><strong>break &ndash; b</strong></a></li>
                <li>
                    <a href="#info" aria-label="info"><strong>info</strong></a></li>
                <li>
                    <a href="#disable----dis" aria-label="disable &amp;ndash; dis"><strong>disable &ndash; dis</strong></a></li>
                <li>
                    <a href="#enable" aria-label="enable"><strong>enable</strong></a></li>
                <li>
                    <a href="#clear" aria-label="clear"><strong>clear</strong></a></li>
                <li>
                    <a href="#delete----d" aria-label="delete &amp;ndash; d"><strong>delete &ndash; d</strong></a></li>
                <li>
                    <a href="#tbreak" aria-label="tbreak"><strong>tbreak</strong></a></li>
                <li>
                    <a href="#watch" aria-label="watch"><strong>watch</strong></a></li>
                <li>
                    <a href="#step----s" aria-label="step &amp;ndash; s"><strong>step &ndash; s</strong></a></li>
                <li>
                    <a href="#reverse-step" aria-label="reverse-step"><strong>reverse-step</strong></a></li>
                <li>
                    <a href="#next----n" aria-label="next &amp;ndash; n"><strong>next &ndash; n</strong></a></li>
                <li>
                    <a href="#reverse-next" aria-label="reverse-next"><strong>reverse-next</strong></a></li>
                <li>
                    <a href="#return" aria-label="return"><strong>return</strong></a></li>
                <li>
                    <a href="#finish----fin" aria-label="finish &amp;ndash; fin"><strong>finish &ndash; fin</strong></a></li>
                <li>
                    <a href="#until----u" aria-label="until &amp;ndash; u"><strong>until &ndash; u</strong></a></li>
                <li>
                    <a href="#continue----c" aria-label="continue &amp;ndash; c"><strong>continue &ndash; c</strong></a></li>
                <li>
                    <a href="#print----p" aria-label="print &amp;ndash; p"><strong>print &ndash; p</strong></a></li>
                <li>
                    <a href="#x" aria-label="x"><strong>x</strong></a></li>
                <li>
                    <a href="#display" aria-label="display"><strong>display</strong></a></li>
                <li>
                    <a href="#disassemble----disas" aria-label="disassemble &amp;ndash; disas"><strong>disassemble &ndash; disas</strong></a></li>
                <li>
                    <a href="#undisplay" aria-label="undisplay"><strong>undisplay</strong></a></li>
                <li>
                    <a href="#disable-display" aria-label="disable display"><strong>disable display</strong></a></li>
                <li>
                    <a href="#enable-display" aria-label="enable display"><strong>enable display</strong></a></li>
                <li>
                    <a href="#help----h" aria-label="help &amp;ndash; h"><strong>help &ndash; h</strong></a></li>
                <li>
                    <a href="#attach" aria-label="attach"><strong>attach</strong></a></li>
                <li>
                    <a href="#run----r" aria-label="run &amp;ndash; r"><strong>run &ndash; r</strong></a></li>
                <li>
                    <a href="#backtrace----bt" aria-label="backtrace &amp;ndash; bt"><strong>backtrace &ndash; bt</strong></a></li>
                <li>
                    <a href="#ptype" aria-label="ptype"><strong>ptype</strong></a></li>
                <li>
                    <a href="#set-follow-fork-mode" aria-label="set follow-fork-mode"><strong>set follow-fork-mode</strong></a></li>
                <li>
                    <a href="#thread-apply-all-bt" aria-label="thread apply all bt"><strong>thread apply all bt</strong></a></li>
                <li>
                    <a href="#generate-core-file" aria-label="generate-core-file"><strong>generate-core-file</strong></a></li>
                <li>
                    <a href="#directory----dir" aria-label="directory &amp;ndash; dir"><strong>directory &ndash; dir</strong></a></li></ul>
                </li>
                <li>
                    <a href="#gdb-peda" aria-label="gdb-peda"><strong>gdb-peda</strong></a><ul>
                        
                <li>
                    <a href="#%e5%ae%89%e8%a3%85" aria-label="å®‰è£…"><strong>å®‰è£…</strong></a></li>
                <li>
                    <a href="#peda%e5%91%bd%e4%bb%a4" aria-label="pedaå‘½ä»¤"><strong>pedaå‘½ä»¤</strong></a></li>
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8-peda-%e5%92%8c-python-%e7%bc%96%e5%86%99-gdb-%e8%84%9a%e6%9c%ac" aria-label="ä½¿ç”¨ PEDA å’Œ Python ç¼–å†™ gdb è„šæœ¬"><strong>ä½¿ç”¨ PEDA å’Œ Python ç¼–å†™ gdb è„šæœ¬</strong></a></li>
                <li>
                    <a href="#pwndbgpeda" aria-label="pwndbg&amp;amp;&amp;amp;peda">pwndbg&amp;&amp;peda</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%8f%82%e8%80%83%e8%b5%84%e6%96%99" aria-label="å‚è€ƒèµ„æ–™"><strong>å‚è€ƒèµ„æ–™</strong></a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="å°è®°">å°è®°<a hidden class="anchor" aria-hidden="true" href="#å°è®°">#</a></h2>
<h3 id="gdbpwndbg">GDB&amp;Pwndbg<a hidden class="anchor" aria-hidden="true" href="#gdbpwndbg">#</a></h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">runï¼šr å¼€å§‹æ‰§è¡Œ
<span style="color:#66d9ef">continue</span>ï¼šc ç»§ç»­æ‰§è¡Œï¼Œåˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹
stack <span style="color:#ae81ff">24</span> æŸ¥çœ‹æ ˆä¸­24ä¸ªå•ä½çš„æ•°æ®
vmmap è™šæ‹Ÿå†…å­˜çš„ç©ºé—´åˆ†å¸ƒ
gdb link
plt æŸ¥çœ‹pltè¡¨
got æŸ¥çœ‹gotè¡¨
x/20 gxb
info b æŸ¥çœ‹æ–­ç‚¹
start åœç•™åœ¨mainå‡½æ•°çš„ç¬¬ä¸€è¡Œï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™åœç•™åœ¨å…¥å£
backtrace æ˜¾ç¤ºå‡½æ•°è°ƒç”¨æ ˆ
<span style="color:#66d9ef">return</span> è·³å‡ºå½“å‰å‡½æ•°
</code></pre></div><pre><code>gdb é‡Œé¢ å•æ­¥è°ƒè¯•åˆ†ä¸¤ç§ä¸€ç§æ˜¯Cè¯­è¨€çº§åˆ«çš„å•æ­¥nä¸€ç§æ˜¯æ±‡ç¼–æŒ‡ä»¤çº§åˆ«çš„å•æ­¥niniæŒ‰ä¸€æ¬¡ ä¹‹åç›´æ¥å›è½¦å°±å¥½äº†gdbè‡ªåŠ¨é‡å¤æŒ‡ä»¤çš„ 
</code></pre><p>nextï¼šn å•æ­¥æ­¥è¿‡
niï¼š æ±‡ç¼–æŒ‡ä»¤çº§åˆ«çš„<strong>å•æ­¥æ­¥è¿‡</strong></p>
<p>stepï¼šs å•æ­¥æ­¥å…¥</p>
<p>siï¼šæ±‡ç¼–æŒ‡ä»¤çº§åˆ«çš„ <strong>å•æ­¥æ­¥å…¥</strong></p>
<p>dissa addrï¼š å¯¹å‡½æ•°æˆ–åœ°å€å¤„çš„æŒ‡ä»¤è¿›è¡Œåæ±‡ç¼–</p>
<p>b *addrï¼šä¸‹æ–­ç‚¹</p>
<p>x addrï¼šæŸ¥çœ‹åœ°å€addrå¤„å­˜å‚¨çš„æ•°æ®å€¼</p>
<p>info function/ bï¼šæŸ¥çœ‹å‡½æ•°/ æ–­ç‚¹</p>
<pre><code>x/ nfu &lt;addr&gt;æŸ¥çœ‹å†…å­˜ï¼š
	nï¼šè¦æ˜¾ç¤ºå†…å­˜å•å…ƒçš„ä¸ªæ•°
	fï¼šæ˜¾ç¤ºæ–¹å¼
	uï¼šä¸€ä¸ªåœ°å€å•å…ƒçš„é•¿åº¦
</code></pre><p>gdb.attach()  è¿åˆ°ç¬¬ä¸€æ¬¡è¾“å…¥ä¹‹å æ–­ç‚¹ä¸‹åˆ° gets ä¹‹åé‚£ä¸€å¥</p>
<p>pwndbg&gt; vmmap</p>
<p>æŸ¥çœ‹åœ°å€æ˜¯å¦å¯è¯»å¯å†™</p>
<p>ä½¿ç”¨æ–¹æ³•:xå…ˆ r ,ç„¶åCtrl Cæš‚åœ,ç¼“å­˜ä¸ä¼šæ¸…ç©º.å†vmmap</p>
<h4 id="ç®€å•çš„åç§»è®¡ç®—ç¤ºä¾‹">ç®€å•çš„åç§»è®¡ç®—ç¤ºä¾‹<a hidden class="anchor" aria-hidden="true" href="#ç®€å•çš„åç§»è®¡ç®—ç¤ºä¾‹">#</a></h4>
<p><img loading="lazy" src="https://www.kro1lsec.com:442/images/2021/05/28/20210528160327.png" alt="img"  />
</p>
<p><img loading="lazy" src="https://www.kro1lsec.com:442/images/2021/05/28/20210528160149.png" alt="img"  />
æ¨æ–­ä¸ºespå¯»å€</p>
<pre><code>from pwn import *

p = process(&quot;./ret2.text&quot;)
#espå¯»å€ï¼Œç¼–è¯‘å™¨ä¼šä¼˜åŒ–ã€‚éœ€è¦+8ä¸ªå­—èŠ‚

esp_padding = &quot;junkjunk&quot;
#32ä½ä¸º+4ï¼Œ64ä½+8
ebp_fake = &quot;junk&quot;
#å®šä¹‰char s åˆ†é…äº†64çš„ç©ºé—´
padding = &quot;a&quot;*0x64
#call system å‡½æ•° ä¸Šä¸€è¡Œ mov... ä¼ å…¥å‚æ•°çš„åœ°å€
ret_addr = 0x0804863A
payload = padding + ebp_fake + esp_padding + p32(ret_addr)
p.sendlineafter(&quot;There is something amazing here,do you know any thing?\n&quot;ï¼Œpayload)
p.interactive() 
</code></pre><h3 id="ç»„æˆæ¶æ„">ç»„æˆæ¶æ„<a hidden class="anchor" aria-hidden="true" href="#ç»„æˆæ¶æ„">#</a></h3>
<p><img loading="lazy" src="https://www.kro1lsec.com:442/images/2021/05/28/20210528160151.png" alt="img"  />
</p>
<h3 id="åŸºæœ¬å·¥ä½œåŸç†"><strong>åŸºæœ¬å·¥ä½œåŸç†</strong><a hidden class="anchor" aria-hidden="true" href="#åŸºæœ¬å·¥ä½œåŸç†">#</a></h3>
<p>gdb é€šè¿‡ç³»ç»Ÿè°ƒç”¨ <code>ptrace</code> æ¥æ¥ç®¡ä¸€ä¸ªè¿›ç¨‹çš„æ‰§è¡Œã€‚ptrace ç³»ç»Ÿè°ƒç”¨æä¾›äº†ä¸€ç§æ–¹æ³•ä½¿å¾—çˆ¶è¿›ç¨‹å¯ä»¥è§‚å¯Ÿå’Œæ§åˆ¶å…¶å®ƒè¿›ç¨‹çš„æ‰§è¡Œï¼Œæ£€æŸ¥å’Œæ”¹å˜å…¶æ ¸å¿ƒæ˜ åƒä»¥åŠå¯„å­˜å™¨ã€‚å®ƒä¸»è¦ç”¨æ¥å®ç°æ–­ç‚¹è°ƒè¯•å’Œç³»ç»Ÿè°ƒç”¨è·Ÿè¸ªã€‚ptrace ç³»ç»Ÿè°ƒç”¨çš„åŸå‹å¦‚ä¸‹ï¼š</p>
<pre><code>#include &lt;sys/ptrace.h&gt;
long ptrace(enum __ptrace_request request, pid_t pid, void *addr, void *data);
</code></pre><ul>
<li><strong>pid_t pid</strong>ï¼šæŒ‡ç¤º ptrace è¦è·Ÿè¸ªçš„è¿›ç¨‹ã€‚</li>
<li><strong>void *addr</strong>ï¼šæŒ‡ç¤ºè¦ç›‘æ§çš„å†…å­˜åœ°å€ã€‚</li>
<li><strong>void *data</strong>ï¼šå­˜æ”¾è¯»å–å‡ºçš„æˆ–è€…è¦å†™å…¥çš„æ•°æ®ã€‚</li>
<li><strong>enum __ptrace_request request</strong>ï¼šå†³å®šäº†ç³»ç»Ÿè°ƒç”¨çš„åŠŸèƒ½ï¼Œå‡ ä¸ªä¸»è¦çš„é€‰é¡¹ï¼š
<ul>
<li><em>PTRACE_TRACEME</em>ï¼šè¡¨ç¤ºæ­¤è¿›ç¨‹å°†è¢«çˆ¶è¿›ç¨‹è·Ÿè¸ªï¼Œä»»ä½•ä¿¡å·ï¼ˆé™¤äº† <code>SIGKILL</code>ï¼‰éƒ½ä¼šæš‚åœå­è¿›ç¨‹ï¼Œæ¥ç€é˜»å¡äº <code>wait()</code> ç­‰å¾…çš„çˆ¶è¿›ç¨‹è¢«å”¤é†’ã€‚å­è¿›ç¨‹å†…éƒ¨å¯¹ <code>exec()</code> çš„è°ƒç”¨å°†å‘å‡º <code>SIGTRAP</code> ä¿¡å·ï¼Œè¿™å¯ä»¥è®©çˆ¶è¿›ç¨‹åœ¨å­è¿›ç¨‹æ–°ç¨‹åºå¼€å§‹è¿è¡Œä¹‹å‰å°±å®Œå…¨æ§åˆ¶å®ƒã€‚</li>
<li><em>PTRACE_ATTACH</em>ï¼šattach åˆ°ä¸€ä¸ªæŒ‡å®šçš„è¿›ç¨‹ï¼Œä½¿å…¶æˆä¸ºå½“å‰è¿›ç¨‹è·Ÿè¸ªçš„å­è¿›ç¨‹ï¼Œè€Œå­è¿›ç¨‹çš„è¡Œä¸ºç­‰åŒäºå®ƒè¿›è¡Œäº†ä¸€æ¬¡ PTRACE_TRACEME æ“ä½œã€‚ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶å½“å‰è¿›ç¨‹æˆä¸ºè¢«è·Ÿè¸ªè¿›ç¨‹çš„çˆ¶è¿›ç¨‹ï¼Œä½†æ˜¯å­è¿›ç¨‹ä½¿ç”¨ <code>getppid()</code> çš„åˆ°çš„ä»å°†æ˜¯å…¶åŸå§‹çˆ¶è¿›ç¨‹çš„ pidã€‚</li>
<li><em>PTRACE_CONT</em>ï¼šç»§ç»­è¿è¡Œä¹‹å‰åœæ­¢çš„å­è¿›ç¨‹ã€‚å¯åŒæ—¶å‘å­è¿›ç¨‹äº¤ä»˜æŒ‡å®šçš„ä¿¡å·ã€‚</li>
</ul>
</li>
</ul>
<h3 id="ä¸‰ç§è°ƒè¯•æ–¹å¼">ä¸‰ç§è°ƒè¯•æ–¹å¼<a hidden class="anchor" aria-hidden="true" href="#ä¸‰ç§è°ƒè¯•æ–¹å¼">#</a></h3>
<ul>
<li>è¿è¡Œå¹¶è°ƒè¯•ä¸€ä¸ªæ–°è¿›ç¨‹
<ul>
<li>è¿è¡Œ gdbï¼Œé€šè¿‡å‘½ä»¤è¡Œæˆ– <code>file</code> å‘½ä»¤æŒ‡å®šç›®æ ‡ç¨‹åºã€‚</li>
<li>è¾“å…¥ <code>run</code> å‘½ä»¤ï¼Œ gdb æ‰§è¡Œä¸‹é¢çš„æ“ä½œï¼š
<ul>
<li>é€šè¿‡ <code>fork()</code> ç³»ç»Ÿè°ƒç”¨åˆ›å»ºä¸€ä¸ªæ–°è¿›ç¨‹</li>
<li>åœ¨æ–°åˆ›å»ºçš„å­è¿›ç¨‹ä¸­æ‰§è¡Œæ“ä½œï¼š<code>ptrace(PTRACE_TRACEME, 0, 0, 0)</code></li>
<li>åœ¨å­è¿›ç¨‹ä¸­é€šè¿‡ <code>execv()</code> ç³»ç»Ÿè°ƒç”¨åŠ è½½ç”¨æˆ·æŒ‡å®šçš„å¯æ‰§è¡Œæ–‡ä»¶</li>
</ul>
</li>
</ul>
</li>
<li>attach å¹¶è°ƒè¯•ä¸€ä¸ªå·²ç»è¿è¡Œçš„è¿›ç¨‹
<ul>
<li>ç”¨æˆ·ç¡®å®šéœ€è¦è¿›è¡Œè°ƒè¯•çš„è¿›ç¨‹ PID</li>
<li>è¿è¡Œ gdbï¼Œè¾“å…¥ <code>attach &lt;pid&gt;</code>ï¼Œgdb å°†å¯¹æŒ‡å®šè¿›ç¨‹æ‰§è¡Œæ“ä½œï¼š<code>ptrace(PTRACE_ATTACH, pid, 0, 0)</code></li>
</ul>
</li>
<li>è¿œç¨‹è°ƒè¯•ç›®æ ‡æœºä¸Šæ–°åˆ›å»ºçš„è¿›ç¨‹
<ul>
<li>gdb è¿è¡Œåœ¨è°ƒè¯•æœºä¸Šï¼Œgdbserver è¿è¡Œåœ¨ç›®æ ‡æœºä¸Šï¼Œä¸¤è€…ä¹‹é—´çš„é€šä¿¡æ•°æ®æ ¼å¼ç”± gdb è¿œç¨‹ä¸²è¡Œåè®®ï¼ˆRemote Serial Protocolï¼‰å®šä¹‰</li>
<li>RSP åè®®æ•°æ®çš„åŸºæœ¬æ ¼å¼ä¸ºï¼š <code>$..........#xx</code></li>
<li>gdbserver çš„å¯åŠ¨æ–¹å¼ç›¸å½“äºè¿è¡Œå¹¶è°ƒè¯•ä¸€ä¸ªæ–°åˆ›å»ºçš„è¿›ç¨‹</li>
</ul>
</li>
</ul>
<p>æ³¨æ„ï¼Œåœ¨ä½ å°† gdb attach åˆ°ä¸€ä¸ªè¿›ç¨‹æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°è¿™æ ·çš„é—®é¢˜ï¼š</p>
<pre><code>gdb-peda$ attach 9091
Attaching to process 9091
ptrace: Operation not permitted.
</code></pre><p>è¿™æ˜¯å› ä¸ºå¼€å¯äº†å†…æ ¸å‚æ•° <code>ptrace_scope</code>ï¼š</p>
<pre><code>$ cat /proc/sys/kernel/yama/ptrace_scope
1
</code></pre><p>1 è¡¨ç¤º Trueï¼Œæ­¤æ—¶æ™®é€šç”¨æˆ·è¿›ç¨‹æ˜¯ä¸èƒ½å¯¹å…¶ä»–è¿›ç¨‹è¿›è¡Œ attach æ“ä½œçš„ï¼Œå½“ç„¶ä½ å¯ä»¥ç”¨ root æƒé™å¯åŠ¨ gdbï¼Œä½†æœ€å¥½çš„åŠæ³•è¿˜æ˜¯å…³æ‰å®ƒï¼š</p>
<pre><code># echo 0 &gt; /proc/sys/kernel/yama/ptrace_scope
</code></pre><h3 id="æ–­ç‚¹çš„å®ç°"><strong>æ–­ç‚¹çš„å®ç°</strong><a hidden class="anchor" aria-hidden="true" href="#æ–­ç‚¹çš„å®ç°">#</a></h3>
<p>æ–­ç‚¹çš„åŠŸèƒ½æ˜¯é€šè¿‡å†…æ ¸ä¿¡å·å®ç°çš„ï¼Œåœ¨ x86 æ¶æ„ä¸Šï¼Œå†…æ ¸å‘æŸä¸ªåœ°å€æ‰“å…¥æ–­ç‚¹ï¼Œå®é™…ä¸Šå°±æ˜¯å¾€è¯¥åœ°å€å†™å…¥æ–­ç‚¹æŒ‡ä»¤ <code>INT 3</code>ï¼Œå³ <code>0xCC</code>ã€‚ç›®æ ‡ç¨‹åºè¿è¡Œåˆ°è¿™æ¡æŒ‡ä»¤ä¹‹åä¼šè§¦å‘ <code>SIGTRAP</code> ä¿¡å·ï¼Œgdb æ•è·è¿™ä¸ªä¿¡å·ï¼Œå¹¶æ ¹æ®ç›®æ ‡ç¨‹åºå½“å‰åœæ­¢çš„ä½ç½®æŸ¥è¯¢ gdb ç»´æŠ¤çš„æ–­ç‚¹é“¾è¡¨ï¼Œè‹¥å‘ç°åœ¨è¯¥åœ°å€ç¡®å®å­˜åœ¨æ–­ç‚¹ï¼Œåˆ™å¯åˆ¤å®šä¸ºæ–­ç‚¹å‘½ä¸­ã€‚</p>
<h1 id="gdb-åŸºæœ¬æ“ä½œ"><strong>gdb åŸºæœ¬æ“ä½œ</strong><a hidden class="anchor" aria-hidden="true" href="#gdb-åŸºæœ¬æ“ä½œ">#</a></h1>
<p>ä½¿ç”¨ <code>-tui</code> é€‰é¡¹å¯ä»¥å°†ä»£ç æ˜¾ç¤ºåœ¨ä¸€ä¸ªæ¼‚äº®çš„äº¤äº’å¼çª—å£ä¸­ã€‚</p>
<p>è°ƒè¯•ä¸­å¯ç”¨Ctrl+X+Aåˆ‡æ¢</p>
<h2 id="break----b"><strong>break &ndash; b</strong><a hidden class="anchor" aria-hidden="true" href="#break----b">#</a></h2>
<ul>
<li><code>break</code> å½“ä¸å¸¦å‚æ•°æ—¶ï¼Œåœ¨æ‰€é€‰æ ˆå¸§ä¸­æ‰§è¡Œçš„ä¸‹ä¸€æ¡æŒ‡ä»¤å¤„è®¾ç½®æ–­ç‚¹ã€‚</li>
<li><code>break &lt;function&gt;</code> åœ¨å‡½æ•°ä½“å…¥å£å¤„æ‰“æ–­ç‚¹ã€‚</li>
<li><code>break &lt;line&gt;</code> åœ¨å½“å‰æºç æ–‡ä»¶æŒ‡å®šè¡Œçš„å¼€å§‹å¤„æ‰“æ–­ç‚¹ã€‚</li>
<li><code>break -N</code> <code>break +N</code> åœ¨å½“å‰æºç è¡Œå‰é¢æˆ–åé¢çš„ <code>N</code> è¡Œå¼€å§‹å¤„æ‰“æ–­ç‚¹ï¼Œ<code>N</code> ä¸ºæ­£æ•´æ•°ã€‚</li>
<li><code>break &lt;filename:line&gt;</code> åœ¨æºç æ–‡ä»¶ <code>filename</code> çš„ <code>line</code> è¡Œå¤„æ‰“æ–­ç‚¹ã€‚</li>
<li><code>break &lt;filename:function&gt;</code> åœ¨æºç æ–‡ä»¶ <code>filename</code> çš„ <code>function</code> å‡½æ•°å…¥å£å¤„æ‰“æ–­ç‚¹ã€‚</li>
<li><code>break &lt;address&gt;</code> åœ¨ç¨‹åºæŒ‡ä»¤çš„åœ°å€å¤„æ‰“æ–­ç‚¹ã€‚</li>
<li><code>break ... if &lt;cond&gt;</code> è®¾ç½®æ¡ä»¶æ–­ç‚¹ï¼Œ<code>...</code> ä»£è¡¨ä¸Šè¿°å‚æ•°ä¹‹ä¸€ï¼ˆæˆ–æ— å‚æ•°ï¼‰ï¼Œ<code>cond</code> ä¸ºæ¡ä»¶è¡¨è¾¾å¼ï¼Œä»…åœ¨ <code>cond</code> å€¼éé›¶æ—¶åœä½ç¨‹åºã€‚</li>
</ul>
<h2 id="info"><strong>info</strong><a hidden class="anchor" aria-hidden="true" href="#info">#</a></h2>
<ul>
<li><code>info breakpoints -- i b</code> æŸ¥çœ‹æ–­ç‚¹ï¼Œè§‚å¯Ÿç‚¹å’Œæ•è·ç‚¹çš„åˆ—è¡¨ã€‚
<ul>
<li><code>info breakpoints [listâ€¦]</code></li>
<li><code>info break [listâ€¦]</code></li>
<li><code>listâ€¦</code> ç”¨æ¥æŒ‡å®šè‹¥å¹²ä¸ªæ–­ç‚¹çš„ç¼–å·ï¼ˆå¯çœç•¥ï¼‰ï¼Œå¯ä»¥æ˜¯ <code>2</code>ï¼Œ <code>1-3</code>ï¼Œ <code>2 5</code> ç­‰ã€‚</li>
</ul>
</li>
<li><code>info display</code> æ‰“å°è‡ªåŠ¨æ˜¾ç¤ºçš„è¡¨è¾¾å¼åˆ—è¡¨ï¼Œæ¯ä¸ªè¡¨è¾¾å¼éƒ½å¸¦æœ‰é¡¹ç›®ç¼–å·ï¼Œä½†ä¸æ˜¾ç¤ºå…¶å€¼ã€‚</li>
<li><code>info reg</code> æ˜¾ç¤ºå½“å‰å¯„å­˜å™¨ä¿¡æ¯ã€‚</li>
<li><code>info threads</code> æ‰“å°å‡ºæ‰€æœ‰çº¿ç¨‹çš„ä¿¡æ¯ï¼ŒåŒ…å« Thread IDã€Target ID å’Œ Frameã€‚</li>
<li><code>info frame</code> æ‰“å°å‡ºæŒ‡å®šæ ˆå¸§çš„è¯¦ç»†ä¿¡æ¯ã€‚</li>
<li><code>info proc</code> æŸ¥çœ‹ proc é‡Œçš„è¿›ç¨‹ä¿¡æ¯ã€‚</li>
</ul>
<h2 id="disable----dis"><strong>disable &ndash; dis</strong><a hidden class="anchor" aria-hidden="true" href="#disable----dis">#</a></h2>
<p>ç¦ç”¨æ–­ç‚¹ï¼Œå‚æ•°ä½¿ç”¨ç©ºæ ¼åˆ†éš”ã€‚ä¸å¸¦å‚æ•°æ—¶ç¦ç”¨æ‰€æœ‰æ–­ç‚¹ã€‚</p>
<ul>
<li><code>disable [breakpoints] [listâ€¦]</code> <code>breakpoints</code> æ˜¯ <code>disable</code> çš„å­å‘½ä»¤ï¼ˆå¯çœç•¥ï¼‰ï¼Œ<code>listâ€¦</code> åŒ <code>info breakpoints</code> ä¸­çš„æè¿°ã€‚</li>
</ul>
<h2 id="enable"><strong>enable</strong><a hidden class="anchor" aria-hidden="true" href="#enable">#</a></h2>
<p>å¯ç”¨æ–­ç‚¹ï¼Œå‚æ•°ä½¿ç”¨ç©ºæ ¼åˆ†éš”ã€‚ä¸å¸¦å‚æ•°æ—¶å¯ç”¨æ‰€æœ‰æ–­ç‚¹ã€‚</p>
<ul>
<li><code>enable [breakpoints] [listâ€¦]</code> å¯ç”¨æŒ‡å®šçš„æ–­ç‚¹ï¼ˆæˆ–æ‰€æœ‰å®šä¹‰çš„æ–­ç‚¹ï¼‰ã€‚</li>
<li><code>enable [breakpoints] once listâ€¦</code> ä¸´æ—¶å¯ç”¨æŒ‡å®šçš„æ–­ç‚¹ã€‚GDB åœ¨åœæ­¢æ‚¨çš„ç¨‹åºåç«‹å³ç¦ç”¨è¿™äº›æ–­ç‚¹ã€‚</li>
<li><code>enable [breakpoints] delete listâ€¦</code> ä½¿æŒ‡å®šçš„æ–­ç‚¹å¯ç”¨ä¸€æ¬¡ï¼Œç„¶ååˆ é™¤ã€‚ä¸€æ—¦æ‚¨çš„ç¨‹åºåœæ­¢ï¼ŒGDB å°±ä¼šåˆ é™¤è¿™äº›æ–­ç‚¹ã€‚ç­‰æ•ˆäºç”¨ <code>tbreak</code> è®¾ç½®çš„æ–­ç‚¹ã€‚</li>
</ul>
<p><code>breakpoints</code> åŒ <code>disable</code> ä¸­çš„æè¿°ã€‚</p>
<h2 id="clear"><strong>clear</strong><a hidden class="anchor" aria-hidden="true" href="#clear">#</a></h2>
<p>åœ¨æŒ‡å®šè¡Œæˆ–å‡½æ•°å¤„æ¸…é™¤æ–­ç‚¹ã€‚å‚æ•°å¯ä»¥æ˜¯è¡Œå·ï¼Œå‡½æ•°åç§°æˆ– <code>*</code> è·Ÿä¸€ä¸ªåœ°å€ã€‚</p>
<ul>
<li><code>clear</code> å½“ä¸å¸¦å‚æ•°æ—¶ï¼Œæ¸…é™¤æ‰€é€‰æ ˆå¸§åœ¨æ‰§è¡Œçš„æºç è¡Œä¸­çš„æ‰€æœ‰æ–­ç‚¹ã€‚</li>
<li><code>clear &lt;function&gt;</code>, <code>clear &lt;filename:function&gt;</code> åˆ é™¤åœ¨å‘½åå‡½æ•°çš„å…¥å£å¤„è®¾ç½®çš„ä»»ä½•æ–­ç‚¹ã€‚</li>
<li><code>clear &lt;line&gt;</code>, <code>clear &lt;filename:line&gt;</code> åˆ é™¤åœ¨æŒ‡å®šçš„æ–‡ä»¶æŒ‡å®šçš„è¡Œå·çš„ä»£ç ä¸­è®¾ç½®çš„ä»»ä½•æ–­ç‚¹ã€‚</li>
<li><code>clear &lt;address&gt;</code> æ¸…é™¤æŒ‡å®šç¨‹åºæŒ‡ä»¤çš„åœ°å€å¤„çš„æ–­ç‚¹ã€‚</li>
</ul>
<h2 id="delete----d"><strong>delete &ndash; d</strong><a hidden class="anchor" aria-hidden="true" href="#delete----d">#</a></h2>
<p>åˆ é™¤æ–­ç‚¹ã€‚å‚æ•°ä½¿ç”¨ç©ºæ ¼åˆ†éš”ã€‚ä¸å¸¦å‚æ•°æ—¶åˆ é™¤æ‰€æœ‰æ–­ç‚¹ã€‚</p>
<ul>
<li><code>delete [breakpoints] [listâ€¦]</code></li>
</ul>
<h2 id="tbreak"><strong>tbreak</strong><a hidden class="anchor" aria-hidden="true" href="#tbreak">#</a></h2>
<p>è®¾ç½®ä¸´æ—¶æ–­ç‚¹ã€‚å‚æ•°å½¢å¼åŒ <code>break</code> ä¸€æ ·ã€‚å½“ç¬¬ä¸€æ¬¡å‘½ä¸­æ—¶è¢«åˆ é™¤ã€‚</p>
<h2 id="watch"><strong>watch</strong><a hidden class="anchor" aria-hidden="true" href="#watch">#</a></h2>
<p>ä¸ºè¡¨è¾¾å¼è®¾ç½®è§‚å¯Ÿç‚¹ã€‚æ¯å½“ä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼æ”¹å˜æ—¶ï¼Œè§‚å¯Ÿç‚¹å°±ä¼šåœæ­¢æ‰§è¡Œæ‚¨çš„ç¨‹åºã€‚</p>
<ul>
<li><code>watch [-l|-location] &lt;expr&gt;</code> å¦‚æœç»™å‡ºäº† <code>-l</code> æˆ–è€… <code>-location</code>ï¼Œåˆ™å®ƒä¼šå¯¹ <code>expr</code> æ±‚å€¼å¹¶è§‚å¯Ÿå®ƒæ‰€æŒ‡å‘çš„å†…å­˜ã€‚</li>
</ul>
<p>å¦å¤– <code>rwatch</code> è¡¨ç¤ºåœ¨è®¿é—®æ—¶åœæ­¢ï¼Œ<code>awatch</code> è¡¨ç¤ºåœ¨è®¿é—®å’Œæ”¹å˜æ—¶éƒ½åœæ­¢ã€‚</p>
<h2 id="step----s"><strong>step &ndash; s</strong><a hidden class="anchor" aria-hidden="true" href="#step----s">#</a></h2>
<p>å•æ­¥æ‰§è¡Œç¨‹åºï¼Œç›´åˆ°åˆ°è¾¾ä¸åŒçš„æºç è¡Œã€‚</p>
<ul>
<li><code>step [N]</code> å‚æ•° <code>N</code> è¡¨ç¤ºæ‰§è¡Œ N æ¬¡ï¼ˆæˆ–ç”±äºå¦ä¸€ä¸ªåŸå› ç›´åˆ°ç¨‹åºåœæ­¢ï¼‰ã€‚</li>
</ul>
<h2 id="reverse-step"><strong>reverse-step</strong><a hidden class="anchor" aria-hidden="true" href="#reverse-step">#</a></h2>
<p>åå‘æ­¥è¿›ç¨‹åºï¼Œç›´åˆ°åˆ°è¾¾å¦ä¸€ä¸ªæºç è¡Œçš„å¼€å¤´ã€‚</p>
<ul>
<li><code>reverse-step [N]</code> å‚æ•° <code>N</code> è¡¨ç¤ºæ‰§è¡Œ N æ¬¡ï¼ˆæˆ–ç”±äºå¦ä¸€ä¸ªåŸå› ç›´åˆ°ç¨‹åºåœæ­¢ï¼‰ã€‚</li>
</ul>
<h2 id="next----n"><strong>next &ndash; n</strong><a hidden class="anchor" aria-hidden="true" href="#next----n">#</a></h2>
<p>å•æ­¥æ‰§è¡Œç¨‹åºï¼Œæ‰§è¡Œå®Œå­ç¨‹åºè°ƒç”¨ã€‚</p>
<ul>
<li><code>next [N]</code></li>
</ul>
<p>ä¸ <code>step</code> ä¸åŒï¼Œå¦‚æœå½“å‰çš„æºä»£ç è¡Œè°ƒç”¨å­ç¨‹åºï¼Œåˆ™æ­¤å‘½ä»¤ä¸ä¼šè¿›å…¥å­ç¨‹åºï¼Œè€Œæ˜¯ç»§ç»­æ‰§è¡Œï¼Œå°†å…¶è§†ä¸ºå•ä¸ªæºä»£ç è¡Œã€‚</p>
<h2 id="reverse-next"><strong>reverse-next</strong><a hidden class="anchor" aria-hidden="true" href="#reverse-next">#</a></h2>
<p>åå‘æ­¥è¿›ç¨‹åºï¼Œæ‰§è¡Œå®Œå­ç¨‹åºè°ƒç”¨ã€‚</p>
<ul>
<li><code>reverse-next [N]</code></li>
</ul>
<p>å¦‚æœè¦æ‰§è¡Œçš„æºä»£ç è¡Œè°ƒç”¨å­ç¨‹åºï¼Œåˆ™æ­¤å‘½ä»¤ä¸ä¼šè¿›å…¥å­ç¨‹åºï¼Œè°ƒç”¨è¢«è§†ä¸ºä¸€ä¸ªæŒ‡ä»¤ã€‚</p>
<h2 id="return"><strong>return</strong><a hidden class="anchor" aria-hidden="true" href="#return">#</a></h2>
<p>æ‚¨å¯ä»¥ä½¿ç”¨ <code>return</code> å‘½ä»¤å–æ¶ˆå‡½æ•°è°ƒç”¨çš„æ‰§è¡Œã€‚å¦‚æœä½ ç»™å‡ºä¸€ä¸ªè¡¨è¾¾å¼å‚æ•°ï¼Œå®ƒçš„å€¼è¢«ç”¨ä½œå‡½æ•°çš„è¿”å›å€¼ã€‚</p>
<ul>
<li><code>return &lt;expression&gt;</code> å°† <code>expression</code> çš„å€¼ä½œä¸ºå‡½æ•°çš„è¿”å›å€¼å¹¶ä½¿å‡½æ•°ç›´æ¥è¿”å›ã€‚</li>
</ul>
<h2 id="finish----fin"><strong>finish &ndash; fin</strong><a hidden class="anchor" aria-hidden="true" href="#finish----fin">#</a></h2>
<p>æ‰§è¡Œç›´åˆ°é€‰å®šçš„æ ˆå¸§è¿”å›ã€‚</p>
<ul>
<li><code>finish</code></li>
</ul>
<h2 id="until----u"><strong>until &ndash; u</strong><a hidden class="anchor" aria-hidden="true" href="#until----u">#</a></h2>
<p>æ‰§è¡Œç¨‹åºç›´åˆ°å¤§äºå½“å‰æ ˆå¸§æˆ–å½“å‰æ ˆå¸§ä¸­çš„æŒ‡å®šä½ç½®ï¼ˆä¸ <code>break</code> å‘½ä»¤ç›¸åŒçš„å‚æ•°ï¼‰çš„æºç è¡Œã€‚æ­¤å‘½ä»¤å¸¸ç”¨äºé€šè¿‡ä¸€ä¸ªå¾ªç¯ï¼Œä»¥é¿å…å•æ­¥æ‰§è¡Œã€‚</p>
<ul>
<li><code>until &lt;location&gt;</code> ç»§ç»­è¿è¡Œç¨‹åºï¼Œç›´åˆ°è¾¾åˆ°æŒ‡å®šçš„ä½ç½®ï¼Œæˆ–è€…å½“å‰æ ˆå¸§è¿”å›ã€‚</li>
</ul>
<h2 id="continue----c"><strong>continue &ndash; c</strong><a hidden class="anchor" aria-hidden="true" href="#continue----c">#</a></h2>
<p>åœ¨ä¿¡å·æˆ–æ–­ç‚¹ä¹‹åï¼Œç»§ç»­è¿è¡Œè¢«è°ƒè¯•çš„ç¨‹åºã€‚</p>
<ul>
<li><code>continue [N]</code></li>
</ul>
<p>å¦‚æœä»æ–­ç‚¹å¼€å§‹ï¼Œå¯ä»¥ä½¿ç”¨æ•°å­— <code>N</code> ä½œä¸ºå‚æ•°ï¼Œè¿™æ„å‘³ç€å°†è¯¥æ–­ç‚¹çš„å¿½ç•¥è®¡æ•°è®¾ç½®ä¸º <code>N - 1</code>(ä»¥ä¾¿æ–­ç‚¹åœ¨ç¬¬ N æ¬¡åˆ°è¾¾ä¹‹å‰ä¸ä¼šä¸­æ–­)ã€‚</p>
<h2 id="print----p"><strong>print &ndash; p</strong><a hidden class="anchor" aria-hidden="true" href="#print----p">#</a></h2>
<p>æ±‚è¡¨è¾¾å¼ expr çš„å€¼å¹¶æ‰“å°ã€‚å¯è®¿é—®çš„å˜é‡æ˜¯æ‰€é€‰æ ˆå¸§çš„è¯æ³•ç¯å¢ƒï¼Œä»¥åŠèŒƒå›´ä¸ºå…¨å±€æˆ–æ•´ä¸ªæ–‡ä»¶çš„æ‰€æœ‰å˜é‡ã€‚</p>
<ul>
<li><code>print [expr]</code></li>
<li><code>print /f [expr]</code> é€šè¿‡æŒ‡å®š <code>/f</code> æ¥é€‰æ‹©ä¸åŒçš„æ‰“å°æ ¼å¼ï¼Œå…¶ä¸­ <code>f</code> æ˜¯ä¸€ä¸ªæŒ‡å®šæ ¼å¼çš„å­—æ¯</li>
</ul>
<h2 id="x"><strong>x</strong><a hidden class="anchor" aria-hidden="true" href="#x">#</a></h2>
<p>æ£€æŸ¥å†…å­˜ã€‚</p>
<ul>
<li><code>x/nfu &lt;addr&gt;</code></li>
<li><code>x &lt;addr&gt;</code>
<ul>
<li><code>n</code>, <code>f</code>, å’Œ <code>u</code> éƒ½æ˜¯å¯é€‰å‚æ•°ï¼Œç”¨äºæŒ‡å®šè¦æ˜¾ç¤ºçš„å†…å­˜ä»¥åŠå¦‚ä½•æ ¼å¼åŒ–ã€‚</li>
<li><code>addr</code> æ˜¯è¦å¼€å§‹æ˜¾ç¤ºå†…å­˜çš„åœ°å€çš„è¡¨è¾¾å¼ã€‚</li>
<li><code>n</code> é‡å¤æ¬¡æ•°ï¼ˆé»˜è®¤å€¼æ˜¯ 1ï¼‰ï¼ŒæŒ‡å®šè¦æ˜¾ç¤ºå¤šå°‘ä¸ªå•ä½ï¼ˆç”± <code>u</code> æŒ‡å®šï¼‰çš„å†…å­˜å€¼ã€‚</li>
<li><code>f</code> æ˜¾ç¤ºæ ¼å¼ï¼ˆåˆå§‹é»˜è®¤å€¼æ˜¯ <code>x</code>ï¼‰ï¼Œæ˜¾ç¤ºæ ¼å¼æ˜¯ <code>print('x'ï¼Œ'd'ï¼Œ'u'ï¼Œ'o'ï¼Œ't'ï¼Œ'a'ï¼Œ'c'ï¼Œ'f'ï¼Œ's')</code> ä½¿ç”¨çš„æ ¼å¼ä¹‹ä¸€ï¼Œå†åŠ  <code>i</code>ï¼ˆæœºå™¨æŒ‡ä»¤ï¼‰ã€‚</li>
<li><code>u</code> å•ä½å¤§å°ï¼Œ<code>b</code> è¡¨ç¤ºå•å­—èŠ‚ï¼Œ<code>h</code> è¡¨ç¤ºåŒå­—èŠ‚ï¼Œ<code>w</code> è¡¨ç¤ºå››å­—èŠ‚ï¼Œ<code>g</code> è¡¨ç¤ºå…«å­—èŠ‚ã€‚</li>
</ul>
</li>
</ul>
<h2 id="display"><strong>display</strong><a hidden class="anchor" aria-hidden="true" href="#display">#</a></h2>
<p>æ¯æ¬¡ç¨‹åºåœæ­¢æ—¶æ‰“å°è¡¨è¾¾å¼ expr çš„å€¼ã€‚</p>
<ul>
<li><code>display &lt;expr&gt;</code></li>
<li><code>display/fmt &lt;expr&gt;</code></li>
<li><code>display/fmt &lt;addr&gt;</code></li>
</ul>
<p><code>fmt</code> ç”¨äºæŒ‡å®šæ˜¾ç¤ºæ ¼å¼ã€‚å¯¹äºæ ¼å¼ <code>i</code> æˆ– <code>s</code>ï¼Œæˆ–è€…åŒ…æ‹¬å•ä½å¤§å°æˆ–å•ä½æ•°é‡ï¼Œå°†è¡¨è¾¾å¼ <code>addr</code> æ·»åŠ ä¸ºæ¯æ¬¡ç¨‹åºåœæ­¢æ—¶è¦æ£€æŸ¥çš„å†…å­˜åœ°å€ã€‚</p>
<h2 id="disassemble----disas"><strong>disassemble &ndash; disas</strong><a hidden class="anchor" aria-hidden="true" href="#disassemble----disas">#</a></h2>
<p>åæ±‡ç¼–å‘½ä»¤ã€‚</p>
<ul>
<li><code>disas &lt;func&gt;</code> åæ±‡ç¼–æŒ‡å®šå‡½æ•°</li>
<li><code>disas &lt;addr&gt;</code> åæ±‡ç¼–æŸåœ°å€æ‰€åœ¨å‡½æ•°</li>
<li><code>disas &lt;begin_addr&gt; &lt;end_addr&gt;</code> åæ±‡ç¼–ä»å¼€å§‹åœ°å€åˆ°ç»“æŸåœ°å€çš„éƒ¨åˆ†</li>
</ul>
<h2 id="undisplay"><strong>undisplay</strong><a hidden class="anchor" aria-hidden="true" href="#undisplay">#</a></h2>
<p>å–æ¶ˆæŸäº›è¡¨è¾¾å¼åœ¨ç¨‹åºåœæ­¢æ—¶è‡ªåŠ¨æ˜¾ç¤ºã€‚å‚æ•°æ˜¯è¡¨è¾¾å¼çš„ç¼–å·ï¼ˆä½¿ç”¨ <code>info display</code> æŸ¥è¯¢ç¼–å·ï¼‰ã€‚ä¸å¸¦å‚æ•°è¡¨ç¤ºå–æ¶ˆæ‰€æœ‰è‡ªåŠ¨æ˜¾ç¤ºè¡¨è¾¾å¼ã€‚</p>
<h2 id="disable-display"><strong>disable display</strong><a hidden class="anchor" aria-hidden="true" href="#disable-display">#</a></h2>
<p>ç¦ç”¨æŸäº›è¡¨è¾¾å¼åœ¨ç¨‹åºåœæ­¢æ—¶è‡ªåŠ¨æ˜¾ç¤ºã€‚ç¦ç”¨çš„æ˜¾ç¤ºé¡¹ç›®è¢«å†æ¬¡å¯ç”¨ã€‚å‚æ•°æ˜¯è¡¨è¾¾å¼çš„ç¼–å·ï¼ˆä½¿ç”¨ <code>info display</code> æŸ¥è¯¢ç¼–å·ï¼‰ã€‚ä¸å¸¦å‚æ•°è¡¨ç¤ºç¦ç”¨æ‰€æœ‰è‡ªåŠ¨æ˜¾ç¤ºè¡¨è¾¾å¼ã€‚</p>
<h2 id="enable-display"><strong>enable display</strong><a hidden class="anchor" aria-hidden="true" href="#enable-display">#</a></h2>
<p>å¯ç”¨æŸäº›è¡¨è¾¾å¼åœ¨ç¨‹åºåœæ­¢æ—¶è‡ªåŠ¨æ˜¾ç¤ºã€‚å‚æ•°æ˜¯é‡æ–°æ˜¾ç¤ºçš„è¡¨è¾¾å¼çš„ç¼–å·ï¼ˆä½¿ç”¨ <code>info display</code> æŸ¥è¯¢ç¼–å·ï¼‰ã€‚ä¸å¸¦å‚æ•°è¡¨ç¤ºå¯ç”¨æ‰€æœ‰è‡ªåŠ¨æ˜¾ç¤ºè¡¨è¾¾å¼ã€‚</p>
<h2 id="help----h"><strong>help &ndash; h</strong><a hidden class="anchor" aria-hidden="true" href="#help----h">#</a></h2>
<p>æ‰“å°å‘½ä»¤åˆ—è¡¨ã€‚</p>
<ul>
<li><code>help &lt;class&gt;</code> æ‚¨å¯ä»¥è·å–è¯¥ç±»ä¸­å„ä¸ªå‘½ä»¤çš„åˆ—è¡¨ã€‚</li>
<li><code>help &lt;command&gt;</code> æ˜¾ç¤ºå¦‚ä½•ä½¿ç”¨è¯¥å‘½ä»¤çš„ç®€è¿°ã€‚</li>
</ul>
<h2 id="attach"><strong>attach</strong><a hidden class="anchor" aria-hidden="true" href="#attach">#</a></h2>
<p>æŒ‚æ¥åˆ° GDB ä¹‹å¤–çš„è¿›ç¨‹æˆ–æ–‡ä»¶ã€‚å°†è¿›ç¨‹ ID æˆ–è®¾å¤‡æ–‡ä»¶ä½œä¸ºå‚æ•°ã€‚</p>
<ul>
<li><code>attach &lt;process-id&gt;</code></li>
</ul>
<h2 id="run----r"><strong>run &ndash; r</strong><a hidden class="anchor" aria-hidden="true" href="#run----r">#</a></h2>
<p>å¯åŠ¨è¢«è°ƒè¯•çš„ç¨‹åºã€‚å¯ä»¥ç›´æ¥æŒ‡å®šå‚æ•°ï¼Œä¹Ÿå¯ä»¥ç”¨ <code>set args</code> è®¾ç½®ï¼ˆå¯åŠ¨æ‰€éœ€çš„ï¼‰å‚æ•°ã€‚è¿˜å…è®¸ä½¿ç”¨ <code>&gt;</code>, <code>&lt;</code>, æˆ– <code>&gt;&gt;</code> è¿›è¡Œè¾“å…¥å’Œè¾“å‡ºé‡å®šå‘ã€‚</p>
<p>ç”šè‡³å¯ä»¥è¿è¡Œä¸€ä¸ªè„šæœ¬ï¼Œå¦‚ï¼š</p>
<pre><code>run `python2 -c 'print &quot;A&quot;*100'`
</code></pre><h2 id="backtrace----bt"><strong>backtrace &ndash; bt</strong><a hidden class="anchor" aria-hidden="true" href="#backtrace----bt">#</a></h2>
<p>æ‰“å°æ•´ä¸ªæ ˆçš„å›æº¯ã€‚</p>
<ul>
<li><code>bt</code> æ‰“å°æ•´ä¸ªæ ˆçš„å›æº¯ï¼Œæ¯ä¸ªæ ˆå¸§ä¸€è¡Œã€‚</li>
<li><code>bt n</code> ç±»ä¼¼äºä¸Šï¼Œä½†åªæ‰“å°æœ€å†…å±‚çš„ n ä¸ªæ ˆå¸§ã€‚</li>
<li><code>bt -n</code> ç±»ä¼¼äºä¸Šï¼Œä½†åªæ‰“å°æœ€å¤–å±‚çš„ n ä¸ªæ ˆå¸§ã€‚</li>
<li><code>bt full n</code> ç±»ä¼¼äº <code>bt n</code>ï¼Œè¿˜æ‰“å°å±€éƒ¨å˜é‡çš„å€¼ã€‚</li>
</ul>
<blockquote>
<p>æ³¨æ„ï¼šä½¿ç”¨ gdb è°ƒè¯•æ—¶ï¼Œä¼šè‡ªåŠ¨å…³é—­ ASLRï¼Œæ‰€ä»¥å¯èƒ½æ¯æ¬¡çœ‹åˆ°çš„æ ˆåœ°å€éƒ½ä¸å˜ã€‚</p>
</blockquote>
<h2 id="ptype"><strong>ptype</strong><a hidden class="anchor" aria-hidden="true" href="#ptype">#</a></h2>
<p>æ‰“å°ç±»å‹ TYPE çš„å®šä¹‰ã€‚</p>
<ul>
<li><code>ptype[/FLAGS] TYPE-NAME | EXPRESSION</code></li>
</ul>
<p>å‚æ•°å¯ä»¥æ˜¯ç”± <code>typedef</code> å®šä¹‰çš„ç±»å‹åï¼Œ æˆ–è€… <code>struct STRUCT-TAG</code> æˆ–è€… <code>class CLASS-NAME</code> æˆ–è€… <code>union UNION-TAG</code> æˆ–è€… <code>enum ENUM-TAG</code>ã€‚</p>
<h2 id="set-follow-fork-mode"><strong>set follow-fork-mode</strong><a hidden class="anchor" aria-hidden="true" href="#set-follow-fork-mode">#</a></h2>
<p>å½“ç¨‹åº fork å‡ºä¸€ä¸ªå­è¿›ç¨‹çš„æ—¶å€™ï¼Œgdb é»˜è®¤ä¼šè¿½è¸ªçˆ¶è¿›ç¨‹ï¼ˆ<code>set follow-fork-mode parent</code>ï¼‰ï¼Œä½†ä¹Ÿå¯ä»¥ä½¿ç”¨å‘½ä»¤ <code>set follow-fork-mode child</code> è®©å…¶è¿½è¸ªå­è¿›ç¨‹ã€‚</p>
<p>å¦å¤–ï¼Œå¦‚æœæƒ³è¦åŒæ—¶è¿½è¸ªçˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹ï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤ <code>set detach-on-fork off</code>ï¼ˆé»˜è®¤ä¸º<code>on</code>ï¼‰ï¼Œè¿™æ ·å°±å¯ä»¥åŒæ—¶è°ƒè¯•çˆ¶å­è¿›ç¨‹ï¼Œåœ¨è°ƒè¯•å…¶ä¸­ä¸€ä¸ªè¿›ç¨‹æ—¶ï¼Œå¦ä¸€ä¸ªè¿›ç¨‹è¢«æŒ‚èµ·ã€‚å¦‚æœæƒ³è®©çˆ¶å­è¿›ç¨‹åŒæ—¶è¿è¡Œï¼Œå¯ä»¥ä½¿ç”¨ <code>set schedule-multiple on</code>ï¼ˆé»˜è®¤ä¸º<code>off</code>ï¼‰ã€‚</p>
<p>ä½†å¦‚æœç¨‹åºæ˜¯ä½¿ç”¨ exec æ¥å¯åŠ¨äº†ä¸€ä¸ªæ–°çš„ç¨‹åºï¼Œå¯ä»¥ä½¿ç”¨ <code>set follow-exec-mode new</code>ï¼ˆé»˜è®¤ä¸º<code>same</code>ï¼‰ æ¥æ–°å»ºä¸€ä¸ª inferior ç»™æ–°ç¨‹åºï¼Œè€Œçˆ¶è¿›ç¨‹çš„ inferior ä»ç„¶ä¿ç•™ã€‚</p>
<h2 id="thread-apply-all-bt"><strong>thread apply all bt</strong><a hidden class="anchor" aria-hidden="true" href="#thread-apply-all-bt">#</a></h2>
<p>æ‰“å°å‡ºæ‰€æœ‰çº¿ç¨‹çš„å †æ ˆä¿¡æ¯ã€‚</p>
<h2 id="generate-core-file"><strong>generate-core-file</strong><a hidden class="anchor" aria-hidden="true" href="#generate-core-file">#</a></h2>
<p>å°†è°ƒè¯•ä¸­çš„è¿›ç¨‹ç”Ÿæˆå†…æ ¸è½¬å‚¨æ–‡ä»¶ã€‚</p>
<h2 id="directory----dir"><strong>directory &ndash; dir</strong><a hidden class="anchor" aria-hidden="true" href="#directory----dir">#</a></h2>
<p>è®¾ç½®æŸ¥æ‰¾æºæ–‡ä»¶çš„è·¯å¾„ã€‚</p>
<p>æˆ–è€…ä½¿ç”¨ gdb çš„ <code>-d</code> å‚æ•°ï¼Œä¾‹å¦‚ï¼š<code>gdb a.out -d /search/code/</code></p>
<h1 id="gdb-peda"><strong>gdb-peda</strong><a hidden class="anchor" aria-hidden="true" href="#gdb-peda">#</a></h1>
<p>å½“ gdb å¯åŠ¨æ—¶ï¼Œå®ƒä¼šåœ¨å½“å‰ç”¨æˆ·çš„ä¸»ç›®å½•ä¸­å¯»æ‰¾ä¸€ä¸ªåä¸º <code>.gdbinit</code> çš„æ–‡ä»¶ï¼›å¦‚æœè¯¥æ–‡ä»¶å­˜åœ¨ï¼Œåˆ™ gdb å°±æ‰§è¡Œè¯¥æ–‡ä»¶ä¸­çš„æ‰€æœ‰å‘½ä»¤ã€‚é€šå¸¸ï¼Œè¯¥æ–‡ä»¶ç”¨äºç®€å•çš„é…ç½®å‘½ä»¤ã€‚ä½†æ˜¯ <code>.gdbinit</code> çš„é…ç½®ååˆ†ç¹çï¼Œå› æ­¤å¯¹ gdb çš„æ‰©å±•é€šå¸¸ç”¨æ’ä»¶çš„æ–¹å¼æ¥å®ç°ï¼Œé€šè¿‡ python çš„è„šæœ¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„å®ç°éœ€è¦çš„åŠŸèƒ½ã€‚</p>
<p>PEDAï¼ˆPython Exploit Development Assistance for GDBï¼‰æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ gdb æ’ä»¶ã€‚å®ƒæä¾›äº†é«˜äº®æ˜¾ç¤ºåæ±‡ç¼–ä»£ç ã€å¯„å­˜å™¨ã€å†…å­˜ä¿¡æ¯ç­‰äººæ€§åŒ–çš„åŠŸèƒ½ã€‚åŒæ—¶ï¼ŒPEDA è¿˜æœ‰ä¸€äº›å®ç”¨çš„æ–°å‘½ä»¤ï¼Œæ¯”å¦‚ checksec å¯ä»¥æŸ¥çœ‹ç¨‹åºå¼€å¯äº†å“ªäº›å®‰å…¨æœºåˆ¶ç­‰ç­‰ã€‚</p>
<h2 id="å®‰è£…"><strong>å®‰è£…</strong><a hidden class="anchor" aria-hidden="true" href="#å®‰è£…">#</a></h2>
<p>å®‰è£… peda éœ€è¦çš„è½¯ä»¶åŒ…ï¼š</p>
<pre><code>$ sudo apt-get install nasm micro-inetd
$ sudo apt-get install libc6-dbg vim ssh
</code></pre><p>å®‰è£… pedaï¼š</p>
<pre><code>$ git clone https://github.com/longld/peda.git ~/peda
$ echo &quot;source ~/peda/peda.py&quot; &gt;&gt; ~/.gdbinit
$ echo &quot;DONE! debug your program with gdb and enjoy&quot;
</code></pre><p>å¦‚æœç³»ç»Ÿä¸º Arch Linuxï¼Œåˆ™å¯ä»¥ç›´æ¥å®‰è£…ï¼š</p>
<pre><code>$ yaourt -S peda
</code></pre><h2 id="pedaå‘½ä»¤"><strong>pedaå‘½ä»¤</strong><a hidden class="anchor" aria-hidden="true" href="#pedaå‘½ä»¤">#</a></h2>
<ul>
<li>
<p><strong><code>aslr</code></strong> &ndash; æ˜¾ç¤º/è®¾ç½® gdb çš„ ASLR</p>
</li>
<li>
<p><code>asmsearch</code> &ndash; Search for ASM instructions in memory</p>
<ul>
<li><code>asmsearch &quot;int 0x80&quot;</code></li>
<li><code>asmsearch &quot;add esp, ?&quot; libc</code></li>
</ul>
</li>
<li>
<p><code>assemble</code> &ndash; On the fly assemble and execute instructions using NASM</p>
<ul>
<li>
<p><code>assemble</code></p>
<pre><code>assemble $pc
&gt; mov al, 0xb
&gt; int 0x80
&gt; end
</code></pre></li>
</ul>
</li>
<li>
<p><strong><code>checksec</code></strong> &ndash; æ£€æŸ¥äºŒè¿›åˆ¶æ–‡ä»¶çš„å®‰å…¨é€‰é¡¹</p>
</li>
<li>
<p><code>cmpmem</code> &ndash; Compare content of a memory region with a file</p>
<ul>
<li><code>cmpmem 0x08049000 0x0804a000 data.mem</code></li>
</ul>
</li>
<li>
<p><code>context</code> &ndash; Display various information of current execution context</p>
<ul>
<li><code>context_code</code> &ndash; Display nearby disassembly at $PC of current execution context</li>
<li><code>context_register</code> &ndash; Display register information of current execution context</li>
<li><code>context_stack</code> &ndash; Display stack of current execution context
<ul>
<li><code>context reg</code></li>
<li><code>context code</code></li>
<li><code>context stack</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p><code>crashdump</code> &ndash; Display crashdump info and save to file</p>
</li>
<li>
<p><code>deactive</code> &ndash; Bypass a function by ignoring its execution (eg sleep/alarm)</p>
<ul>
<li><code>deactive setresuid</code></li>
<li><code>deactive chdir</code></li>
</ul>
</li>
<li>
<p><code>distance</code> &ndash; Calculate distance between two addresses</p>
</li>
<li>
<p><strong><code>dumpargs</code></strong> &ndash; åœ¨è°ƒç”¨æŒ‡ä»¤åœæ­¢æ—¶æ˜¾ç¤ºä¼ é€’ç»™å‡½æ•°çš„å‚æ•°</p>
</li>
<li>
<p><code>dumpmem</code> &ndash; Dump content of a memory region to raw binary file</p>
<ul>
<li><code>dumpmem libc.mem libc</code></li>
</ul>
</li>
<li>
<p><strong><code>dumprop</code></strong> &ndash; åœ¨ç‰¹å®šçš„å†…å­˜èŒƒå›´æ˜¾ç¤º ROP gadgets</p>
<ul>
<li><code>dumprop</code></li>
<li><code>dumprop binary &quot;pop&quot;</code></li>
</ul>
</li>
<li>
<p><code>eflags</code> &ndash; Display/set/clear/toggle value of eflags register</p>
</li>
<li>
<p><strong><code>elfheader</code></strong> &ndash; è·å–æ­£åœ¨è°ƒè¯•çš„ ELF æ–‡ä»¶çš„å¤´ä¿¡æ¯</p>
<ul>
<li><code>elfheader</code></li>
<li><code>elfheader .got</code></li>
</ul>
</li>
<li>
<p><strong><code>elfsymbol</code></strong> &ndash; ä» ELF æ–‡ä»¶ä¸­è·å–æ²¡æœ‰è°ƒè¯•ä¿¡æ¯çš„ç¬¦å·ä¿¡æ¯</p>
<ul>
<li><code>elfsymbol</code></li>
<li><code>elfsymbol printf</code></li>
</ul>
</li>
<li>
<p><code>gennop</code> &ndash; Generate abitrary length NOP sled using given characters</p>
<ul>
<li><code>gennop 500</code></li>
<li><code>gennop 500 &quot;\x90&quot;</code></li>
</ul>
</li>
<li>
<p><code>getfile</code> &ndash; Get exec filename of current debugged process</p>
</li>
<li>
<p><code>getpid</code> &ndash; Get PID of current debugged process</p>
</li>
<li>
<p><code>goto</code> &ndash; Continue execution at an address</p>
</li>
<li>
<p><code>help</code> &ndash; Print the usage manual for PEDA commands</p>
</li>
<li>
<p><code>hexdump</code> &ndash; Display hex/ascii dump of data in memory</p>
<ul>
<li><code>hexdump $sp 64</code></li>
<li><code>hexdump $sp /20</code></li>
</ul>
</li>
<li>
<p><code>hexprint</code> &ndash; Display hexified of data in memory</p>
<ul>
<li><code>hexprint $sp 64</code></li>
<li><code>hexprint $sp /20</code></li>
</ul>
</li>
<li>
<p><code>jmpcall</code> &ndash; Search for JMP/CALL instructions in memory</p>
<ul>
<li><code>jmpcall</code></li>
<li><code>jmpcall eax</code></li>
<li><code>jmpcall esp libc</code></li>
</ul>
</li>
<li>
<p><code>loadmem</code> &ndash; Load contents of a raw binary file to memory</p>
<ul>
<li><code>loadmem stack.mem 0xbffdf000</code></li>
</ul>
</li>
<li>
<p><strong><code>lookup</code></strong> &ndash; æœç´¢å±äºå†…å­˜èŒƒå›´çš„åœ°å€çš„æ‰€æœ‰åœ°å€/å¼•ç”¨</p>
<ul>
<li><code>lookup address stack libc</code></li>
<li><code>lookup pointer stack ld-2</code></li>
</ul>
</li>
<li>
<p><code>nearpc</code> &ndash; Disassemble instructions nearby current PC or given address</p>
<ul>
<li><code>nearpc 20</code></li>
<li><code>nearpc 0x08048484</code></li>
</ul>
</li>
<li>
<p><code>nextcall</code> &ndash; Step until next &lsquo;call&rsquo; instruction in specific memory range</p>
<ul>
<li><code>nextcall cpy</code></li>
</ul>
</li>
<li>
<p><code>nextjmp</code> &ndash; Step until next &lsquo;j*&rsquo; instruction in specific memory range</p>
<ul>
<li><code>nextjmp</code></li>
</ul>
</li>
<li>
<p><code>nxtest</code> &ndash; Perform real NX test to see if it is enabled/supported by OS</p>
</li>
<li>
<p><strong><code>patch</code></strong> &ndash; ä½¿ç”¨å­—ç¬¦ä¸²/åå…­è¿›åˆ¶å­—ç¬¦ä¸²/æ•´å½¢æ•°</p>
<ul>
<li><code>patch $esp 0xdeadbeef</code></li>
<li><code>patch $eax &quot;the long string&quot;</code></li>
<li><code>patch (multiple lines)</code></li>
</ul>
</li>
<li>
<p><strong><code>pattern</code></strong> &ndash; ç”Ÿæˆï¼Œæœç´¢æˆ–å†™å…¥å¾ªç¯ pattern åˆ°å†…å­˜</p>
<ul>
<li><code>pattern_arg</code> &ndash; Set argument list with cyclic pattern</li>
<li><code>pattern_create</code> &ndash; Generate a cyclic pattern</li>
<li><code>pattern_env</code> &ndash; Set environment variable with a cyclic pattern</li>
<li><code>pattern_offset</code> &ndash; Search for offset of a value in cyclic pattern</li>
<li><code>pattern_patch</code> &ndash; Write a cyclic pattern to memory</li>
<li><code>pattern_search</code> &ndash; Search a cyclic pattern in registers and memory
<ul>
<li><code>pattern create 2000</code></li>
<li><code>pattern create 2000 input</code></li>
<li><code>pattern offset $pc</code></li>
<li><code>pattern search</code></li>
<li><code>pattern patch 0xdeadbeef 100</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p><code>payload</code> &ndash; Generate various type of ROP payload using ret2plt</p>
<ul>
<li><code>payload copybytes</code></li>
<li><code>payload copybytes target &quot;/bin/sh&quot;</code></li>
<li><code>payload copybytes 0x0804a010 offset</code></li>
</ul>
</li>
<li>
<p><code>pdisass</code> &ndash; Format output of gdb disassemble command with colors</p>
<ul>
<li><code>pdisass $pc /20</code></li>
</ul>
</li>
<li>
<p><code>pltbreak</code> &ndash; Set breakpoint at PLT functions match name regex</p>
<ul>
<li><code>pltbreak cpy</code></li>
</ul>
</li>
<li>
<p><strong><code>procinfo</code></strong>  &ndash; æ˜¾ç¤ºè°ƒè¯•è¿›ç¨‹çš„ /proc/pid/</p>
<ul>
<li><code>procinfo</code></li>
<li><code>procinfo fd</code></li>
</ul>
</li>
<li>
<p><code>profile</code> &ndash; Simple profiling to count executed instructions in the program</p>
</li>
<li>
<p><code>pyhelp</code> &ndash; Wrapper for python built-in help</p>
<ul>
<li><code>pyhelp peda</code></li>
<li><code>pyhelp hex2str</code></li>
</ul>
</li>
<li>
<p><strong><code>pshow</code></strong> &ndash; æ˜¾ç¤ºå„ç§ PEDA é€‰é¡¹å’Œå…¶ä»–è®¾ç½®</p>
<ul>
<li><code>pshow</code></li>
<li><code>pshow option context</code></li>
</ul>
</li>
<li>
<p><strong><code>pset</code></strong> &ndash; è®¾ç½®å„ç§ PEDA é€‰é¡¹å’Œå…¶ä»–è®¾ç½®</p>
<ul>
<li><code>pset arg '&quot;A&quot;*200'</code></li>
<li><code>pset arg 'cyclic_pattern(200)'</code></li>
<li><code>pset env EGG 'cyclic_pattern(200)'</code></li>
<li><code>pset option context &quot;code,stack&quot;</code></li>
<li><code>pset option badchars &quot;\r\n&quot;</code></li>
</ul>
</li>
<li>
<p><strong><code>readelf</code></strong> &ndash; è·å– ELF çš„æ–‡ä»¶å¤´ä¿¡æ¯</p>
<ul>
<li><code>readelf libc .text</code></li>
</ul>
</li>
<li>
<p><code>refsearch</code> &ndash; Search for all references to a value in memory ranges</p>
<ul>
<li><code>refsearch &quot;/bin/sh&quot;</code></li>
<li><code>refsearch 0xdeadbeef</code></li>
</ul>
</li>
<li>
<p><code>reload</code> &ndash; Reload PEDA sources, keep current options untouch</p>
</li>
<li>
<p><strong><code>ropgadget</code></strong> &ndash; è·å–äºŒè¿›åˆ¶æˆ–åº“çš„å¸¸è§ ROP gadgets</p>
<ul>
<li><code>ropgadget</code></li>
<li><code>ropgadget libc</code></li>
</ul>
</li>
<li>
<p><strong><code>ropsearch</code></strong> &ndash; æœç´¢å†…å­˜ä¸­çš„ ROP gadgets</p>
<ul>
<li><code>ropsearch &quot;pop eax&quot;</code></li>
<li><code>ropsearch &quot;xchg eax, esp&quot; libc</code></li>
</ul>
</li>
<li>
<p><strong><code>searchmem|find</code></strong> &ndash; æœç´¢å†…å­˜ä¸­çš„ pattern; æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼æœç´¢</p>
<ul>
<li><code>find &quot;/bin/sh&quot; libc</code></li>
<li><code>find 0xdeadbeef all</code></li>
<li><code>find &quot;..\x04\x08&quot; 0x08048000 0x08049000</code></li>
</ul>
</li>
<li>
<p><code>searchmem</code> &ndash; Search for a pattern in memory; support regex search</p>
</li>
<li>
<p><code>session</code> &ndash; Save/restore a working gdb session to file as a script</p>
</li>
<li>
<p><code>set</code> &ndash; Set various PEDA options and other settings</p>
<ul>
<li><code>set exec-wrapper ./exploit.py</code></li>
</ul>
</li>
<li>
<p><code>sgrep</code> &ndash; Search for full strings contain the given pattern</p>
</li>
<li>
<p><strong><code>shellcode</code></strong> &ndash; ç”Ÿæˆæˆ–ä¸‹è½½å¸¸è§çš„ shellcode</p>
<ul>
<li><code>shellcode x86/linux exec</code></li>
</ul>
</li>
<li>
<p><code>show</code> &ndash; Show various PEDA options and other settings</p>
</li>
<li>
<p><strong><code>skeleton</code></strong> &ndash; ç”Ÿæˆ python exploit ä»£ç æ¨¡æ¿</p>
<ul>
<li><code>skeleton argv exploit.py</code></li>
</ul>
</li>
<li>
<p><code>skipi</code> &ndash; Skip execution of next count instructions</p>
</li>
<li>
<p><code>snapshot</code> &ndash; Save/restore process&rsquo;s snapshot to/from file</p>
<ul>
<li><code>snapshot save</code></li>
<li><code>snapshot restore</code></li>
</ul>
</li>
<li>
<p><code>start</code> &ndash; Start debugged program and stop at most convenient entry</p>
</li>
<li>
<p><code>stepuntil</code> &ndash; Step until a desired instruction in specific memory range</p>
<ul>
<li><code>stepuntil cmp</code></li>
<li><code>stepuntil xor</code></li>
</ul>
</li>
<li>
<p><code>strings</code> &ndash; Display printable strings in memory</p>
<ul>
<li><code>strings</code></li>
<li><code>strings binary 4</code></li>
</ul>
</li>
<li>
<p><code>substr</code> &ndash; Search for substrings of a given string/number in memory</p>
</li>
<li>
<p><code>telescope</code> &ndash; Display memory content at an address with smart dereferences</p>
<ul>
<li><code>telescope 40</code></li>
<li><code>telescope 0xb7d88000 40</code></li>
</ul>
</li>
<li>
<p><code>tracecall</code> &ndash; Trace function calls made by the program</p>
<ul>
<li><code>tracecall</code></li>
<li><code>tracecall &quot;cpy,printf&quot;</code></li>
<li><code>tracecall &quot;-puts,fflush&quot;</code></li>
</ul>
</li>
<li>
<p><code>traceinst</code> &ndash; Trace specific instructions executed by the program</p>
<ul>
<li><code>traceinst 20</code></li>
<li><code>traceinst &quot;cmp,xor&quot;</code></li>
</ul>
</li>
<li>
<p><code>unptrace</code> &ndash; Disable anti-ptrace detection</p>
<ul>
<li><code>unptrace</code></li>
</ul>
</li>
<li>
<p><code>utils</code> &ndash; Miscelaneous utilities from utils module</p>
</li>
<li>
<p><strong><code>vmmap</code></strong> &ndash; åœ¨è°ƒè¯•è¿‡ç¨‹ä¸­è·å–æ®µçš„è™šæ‹Ÿæ˜ å°„åœ°å€èŒƒå›´</p>
<ul>
<li><code>cmmap</code></li>
<li><code>vmmap binary / libc</code></li>
<li><code>vmmap 0xb7d88000</code></li>
</ul>
</li>
<li>
<p><code>waitfor</code> &ndash; Try to attach to new forked process; mimic &ldquo;attach -waitfor&rdquo;</p>
<ul>
<li><code>waitfor</code></li>
<li><code>waitfor myprog -c</code></li>
</ul>
</li>
<li>
<p><code>xinfo</code> &ndash; Display detail information of address/registers</p>
<ul>
<li><code>xinfo register eax</code></li>
<li><code>xinfo 0xb7d88000</code></li>
</ul>
</li>
<li>
<p><strong><code>xormem</code></strong> &ndash; ç”¨ä¸€ä¸ª key æ¥å¯¹ä¸€ä¸ªå†…å­˜åŒºåŸŸæ‰§è¡Œ XOR æ“ä½œ</p>
<ul>
<li><code>xormem 0x08049000 0x0804a000 â€œthekeyâ€</code></li>
</ul>
</li>
<li>
<p><code>xprint</code> &ndash; Extra support to GDB&rsquo;s print command</p>
</li>
<li>
<p><code>xrefs</code> &ndash; Search for all call/data access references to a function/variable</p>
</li>
<li>
<p><code>xuntil</code> &ndash; Continue execution until an address or function</p>
</li>
</ul>
<h2 id="ä½¿ç”¨-peda-å’Œ-python-ç¼–å†™-gdb-è„šæœ¬"><strong>ä½¿ç”¨ PEDA å’Œ Python ç¼–å†™ gdb è„šæœ¬</strong><a hidden class="anchor" aria-hidden="true" href="#ä½¿ç”¨-peda-å’Œ-python-ç¼–å†™-gdb-è„šæœ¬">#</a></h2>
<ul>
<li>
<p>å…¨å±€ç±»</p>
<ul>
<li><code>pedacmd</code>ï¼š
<ul>
<li>äº¤äº’å¼å‘½ä»¤</li>
<li>æ²¡æœ‰è¿”å›å€¼</li>
<li>ä¾‹å¦‚ï¼š<code>pedacmd.context_register()</code></li>
</ul>
</li>
<li><code>peda</code>ï¼š
<ul>
<li>ä¸ gdb äº¤äº’çš„åç«¯åŠŸèƒ½</li>
<li>æœ‰è¿”å›å€¼</li>
<li>ä¾‹å¦‚ï¼š<code>peda.getreg(&quot;eax&quot;)</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p>å°å·¥å…·</p>
<ul>
<li>ä¾‹å¦‚ï¼š<code>to_int()</code>ã€<code>format_address()</code></li>
<li>è·å¾—å¸®åŠ©
<ul>
<li><code>pyhelp peda</code></li>
<li><code>pyhelp hex2str</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p>å•è¡Œï¼äº¤äº’å¼ä½¿ç”¨</p>
<ul>
<li>
<p><code>gdb-peda$ python print peda.get_vmmap()</code></p>
</li>
<li>
<pre><code>gdb-peda$ python
&gt; status = peda.get_status()
&gt; while status == &quot;BREAKPOINT&quot;:
&gt;    peda.execute(&quot;continue&quot;)
&gt; end
</code></pre></li>
</ul>
</li>
<li>
<p>å¤–éƒ¨è„šæœ¬</p>
<pre><code># myscript.py
def myrun(size):
    argv = cyclic_pattern(size)
    peda.execute(&quot;set arg %s&quot; % argv)
    peda.execute(&quot;run&quot;)
</code></pre><pre><code>gdb-peda$ source myscript.py
gdb-peda$ python myrun(100)
</code></pre></li>
</ul>
<h2 id="pwndbgpeda">pwndbg&amp;&amp;peda<a hidden class="anchor" aria-hidden="true" href="#pwndbgpeda">#</a></h2>
<p>pwndbgåœ¨è°ƒè¯•å †çš„æ•°æ®ç»“æ„æ—¶å€™å¾ˆæ–¹ä¾¿</p>
<p>pedaåœ¨æŸ¥æ‰¾å­—ç¬¦ä¸²ç­‰åŠŸèƒ½æ—¶æ–¹ä¾¿</p>
<p>pwndbgå’Œpedaä¸èƒ½åŒæ—¶ä½¿ç”¨</p>
<p>åˆ‡æ¢æ–¹æ³•</p>
<p>é»˜è®¤åœ¨<code>home</code>ä¸­æ‰“å¼€ç»ˆç«¯:
<code>sudo nano ./.gdbinit</code></p>
<p><img loading="lazy" src="https://www.kro1lsec.com:442/images/2021/05/28/20210528160205.png" alt="img"  />
</p>
<p>æƒ³å¯ç”¨æŸä¸€ä¸ªæ—¶ï¼Œæ³¨é‡Šæ‰å¦ä¸€ä¸ªå°±è¡Œã€‚</p>
<p><img loading="lazy" src="https://www.kro1lsec.com:442/images/2021/05/28/20210528160208.png" alt="img"  />
</p>
<h1 id="å‚è€ƒèµ„æ–™"><strong>å‚è€ƒèµ„æ–™</strong><a hidden class="anchor" aria-hidden="true" href="#å‚è€ƒèµ„æ–™">#</a></h1>
<p><a href="https://sourceware.org/gdb/onlinedocs/gdb/">Debugging with GDB</a></p>
<p><a href="https://github.com/hellogcc/100-gdb-tips">100ä¸ªgdbå°æŠ€å·§</a></p>
<p><a href="https://blog.csdn.net/weixin_43092232/article/details/105648769">pwndbg+pwndbgè”åˆä½¿ç”¨</a></p>
<p><a href="https://github.com/scwuaptx/Pwngdb">Pwngdb</a></p>
<p><a href="https://github.com/hugsy/gef">GEF</a></p>
<p><a href="https://github.com/pwndbg/pwndbg">pwndbg</a></p>
<p><a href="http://ropshell.com/peda/">peda</a></p>


  </div>
  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://inten.kro1lsec.com/tags/%E5%B7%A5%E5%85%B7/">å·¥å…·</a></li>
      <li><a href="https://inten.kro1lsec.com/tags/%E4%BA%8C%E8%BF%9B%E5%88%B6/">äºŒè¿›åˆ¶</a></li>
    </ul>
<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share [å·¥å…·]GDB on twitter"
        href="https://twitter.com/intent/tweet/?text=%5b%e5%b7%a5%e5%85%b7%5dGDB&amp;url=https%3a%2f%2finten.kro1lsec.com%2fpost%2f%25E5%25B7%25A5%25E5%2585%25B7gdb%2f&amp;hashtags=%e5%b7%a5%e5%85%b7%2c%e4%ba%8c%e8%bf%9b%e5%88%b6">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share [å·¥å…·]GDB on linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2finten.kro1lsec.com%2fpost%2f%25E5%25B7%25A5%25E5%2585%25B7gdb%2f&amp;title=%5b%e5%b7%a5%e5%85%b7%5dGDB&amp;summary=%5b%e5%b7%a5%e5%85%b7%5dGDB&amp;source=https%3a%2f%2finten.kro1lsec.com%2fpost%2f%25E5%25B7%25A5%25E5%2585%25B7gdb%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share [å·¥å…·]GDB on reddit"
        href="https://reddit.com/submit?url=https%3a%2f%2finten.kro1lsec.com%2fpost%2f%25E5%25B7%25A5%25E5%2585%25B7gdb%2f&title=%5b%e5%b7%a5%e5%85%b7%5dGDB">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share [å·¥å…·]GDB on facebook"
        href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2finten.kro1lsec.com%2fpost%2f%25E5%25B7%25A5%25E5%2585%25B7gdb%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share [å·¥å…·]GDB on whatsapp"
        href="https://api.whatsapp.com/send?text=%5b%e5%b7%a5%e5%85%b7%5dGDB%20-%20https%3a%2f%2finten.kro1lsec.com%2fpost%2f%25E5%25B7%25A5%25E5%2585%25B7gdb%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share [å·¥å…·]GDB on telegram"
        href="https://telegram.me/share/url?text=%5b%e5%b7%a5%e5%85%b7%5dGDB&amp;url=https%3a%2f%2finten.kro1lsec.com%2fpost%2f%25E5%25B7%25A5%25E5%2585%25B7gdb%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28">
            <path
                d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
</div>

  </footer>
</article>
    </main>
    <footer class="footer">
    <span>&copy; 2021 <a href="https://inten.kro1lsec.com/">intenã®blogğŸ¦</a></span>
    
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)">
    <button class="top-link" id="top-link" type="button" accesskey="g">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z" />
        </svg>
    </button>
</a>

<script>
    let menu = document.getElementById('menu')
    menu.scrollLeft = localStorage.getItem("menu-scroll-position");
    menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
